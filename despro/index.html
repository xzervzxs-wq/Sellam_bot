<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø£Ø³ØªÙˆØ¯ÙŠÙˆ Despro</title>
    
    <!-- ØªØ­Ù‚Ù‚ Ø³Ø±ÙŠØ¹ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© - Ø³Ø·Ø± ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· -->
    <script>try{if(JSON.parse(localStorage.getItem('despro_session')))document.documentElement.classList.add('logged-in');}catch(e){}</script>
    <style>.logged-in #studio-default-display{display:none!important}.logged-in #studio-name-display{display:block!important}</style>
    
    <!-- Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ ÙˆØ§Ù„Ø®Ø·ÙˆØ· -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.min.js"></script>
    <!-- Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© UTIF Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ù„ÙØ§Øª TIF -->
    <script src="https://cdn.jsdelivr.net/npm/utif@3.1.0/UTIF.js"></script>
    <!-- Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© PDF.js Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ù„ÙØ§Øª PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    
    <!-- ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ØµÙˆÙ„ Ù…Ù† GitHub - ÙŠØªÙ… Ø¹Ø¨Ø± fetch -->
    <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ official3.json Ø¹Ø¨Ø± JavaScript -->
    
    <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
    <link id="fa-stylesheet" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous">
    
    <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ù…ÙƒØªØ¨Ø© Ù…ÙˆØ³Ø¹Ø© - 37 Ø®Ø·) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Akatab:wght@400;700&family=Alexandria:wght@400;700&family=Almarai:wght@400;700&family=Amiri:wght@400;700&family=Aref+Ruqaa:wght@400;700&family=Baloo+Bhaijaan+2:wght@400;700&family=Blaka&family=Blaka+Hollow&family=Blaka+Ink&family=Cairo:wght@400;700&family=Changa:wght@400;700&family=El+Messiri:wght@400;700&family=Gulzar&family=Harmattan:wght@400;700&family=IBM+Plex+Sans+Arabic:wght@400;700&family=Katibeh&family=Kufam:wght@400;700&family=Lalezar&family=Lateef:wght@400;700&family=Lemonada:wght@400;700&family=Mada:wght@400;700&family=Marhey:wght@400;700&family=Markazi+Text:wght@400;700&family=Mirza:wght@400;700&family=Noto+Kufi+Arabic:wght@400;700&family=Noto+Sans+Arabic:wght@400;700&family=Noto+Serif+Arabic:wght@400;700&family=Rakkas&family=Readex+Pro:wght@400;700&family=Reem+Kufi:wght@400;700&family=Rubik:wght@400;700&family=Scheherazade+New:wght@400;700&family=Tajawal:wght@400;700&family=Vazirmatn:wght@400;700&family=Zain:wght@400;700&family=Poppins:wght@400;600;700&family=Montserrat:wght@400;600;700&family=Inter:wght@400;600;700&family=Raleway:wght@400;600;700&family=Nunito:wght@400;600;700&family=Quicksand:wght@400;600;700&family=Outfit:wght@400;600;700&family=DM+Sans:wght@400;500;700&family=Space+Grotesk:wght@400;500;700&family=Sora:wght@400;600;700&family=Manrope:wght@400;600;700&family=Plus+Jakarta+Sans:wght@400;600;700&family=Urbanist:wght@400;600;700&family=Lexend:wght@400;600;700&family=Figtree:wght@400;600;700&family=Geist:wght@400;600;700&family=Work+Sans:wght@400;600;700&family=Josefin+Sans:wght@400;600;700&family=Comfortaa:wght@400;600;700&family=Righteous&display=swap" rel="stylesheet" crossorigin="anonymous">

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯ PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
    </script>

    <!-- Stylesheet Ø®Ø§Ø±Ø¬ÙŠ -->
    <link rel="stylesheet" href="css/style.css?v=20260130_02">
    
    <!-- Dark mode fixes - inline Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
    <style>
        :root.dark-mode #layers-container {
            background-color: #0f172a !important;
            border-color: #1e293b !important;
        }
        :root.dark-mode #info-bar-placeholder {
            background-color: #0f172a !important;
            border-color: #1e293b !important;
            color: #94a3b8 !important;
        }
        :root.dark-mode #info-bar-placeholder svg {
            stroke: #94a3b8 !important;
        }
        /* Dark Mode for Designer Panel */
        :root.dark-mode #designer-panel > div:first-child {
            background: linear-gradient(145deg, #1e293b, #0f172a) !important;
            border-color: rgba(51, 65, 85, 0.8) !important;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(30,41,59,0.8) inset !important;
        }
        :root.dark-mode #designer-panel .border-b.border-slate-100 {
            border-color: #334155 !important;
        }
        :root.dark-mode #designer-panel h2.text-slate-800 {
            color: #f1f5f9 !important;
        }
        :root.dark-mode #designer-panel p.text-slate-400 {
            color: #94a3b8 !important;
        }
        :root.dark-mode #designer-panel .bg-slate-100 {
            background-color: #334155 !important;
        }
        :root.dark-mode #designer-panel .text-slate-400 {
            color: #94a3b8 !important;
        }
        /* Statistics section dark mode */
        :root.dark-mode #designer-panel .bg-gradient-to-br.from-slate-50 {
            background: linear-gradient(to bottom right, #1e293b, rgba(15, 23, 42, 0.8)) !important;
            border-color: #334155 !important;
        }
        :root.dark-mode #designer-panel .bg-gradient-to-br.from-slate-50 h3 {
            color: #e2e8f0 !important;
        }
        :root.dark-mode #designer-panel .bg-gradient-to-br.from-slate-50 .bg-white {
            background-color: #0f172a !important;
            border-color: #334155 !important;
        }
        :root.dark-mode #designer-panel .bg-gradient-to-br.from-slate-50 .text-slate-500 {
            color: #94a3b8 !important;
        }
        :root.dark-mode #designer-panel .bg-gradient-to-br.from-slate-50 .text-slate-800 {
            color: #f1f5f9 !important;
        }
        :root.dark-mode #designer-panel .bg-gradient-to-br.from-slate-50 .border-t {
            border-color: #334155 !important;
        }
        /* Dark mode for notes box */
        :root.dark-mode #designer-panel .bg-\[\#fef3c7\] {
            background-color: #1e293b !important;
            border-color: #334155 !important;
        }
        :root.dark-mode #designer-panel .bg-\[\#fef3c7\] h3 {
            color: #e2e8f0 !important;
        }
        :root.dark-mode #designer-panel .bg-\[\#fef3c7\] h3 span.text-\[10px\] {
            background-color: #6366f1 !important;
        }
        :root.dark-mode #designer-panel .bg-\[\#fef3c7\] h3 i {
            color: #818cf8 !important;
        }
        :root.dark-mode #designer-panel .bg-\[\#fef3c7\] textarea {
            background-color: #0f172a !important;
            color: #e2e8f0 !important;
            border-color: #334155 !important;
        }
        :root.dark-mode #designer-panel .bg-\[\#fef3c7\] textarea::placeholder {
            color: #64748b !important;
        }
        :root.dark-mode #designer-panel #premium-notes-promo {
            border-color: #334155 !important;
        }
        :root.dark-mode #designer-panel #premium-notes-promo span {
            color: #94a3b8 !important;
        }
        :root.dark-mode #studio-subtitle-display {
            color: #cbd5e1 !important;
        }
        :root.dark-mode #no-selection-msg {
            color: #cbd5e1 !important;
        }
        /* ØªØºÙ…ÙŠÙ‚ Ø®Ù„ÙÙŠØ§Øª Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ø¯Ø§Ø±Ùƒ Ù…ÙˆØ¯ */
        :root.dark-mode .bg-\[#f8fafc\],
        :root.dark-mode #fav-colors-row,
        :root.dark-mode #grad-controls,
        :root.dark-mode .controls-row {
            background-color: #1e293b !important;
        }
        :root.dark-mode .border-\[#e2e8f0\] {
            border-color: #334155 !important;
        }
        :root.dark-mode .bg-\[#e2e8f0\] {
            background-color: #334155 !important;
        }
    </style>
    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
</head>
<body class="min-h-screen flex flex-col" onclick="deselect(event); closeShapesDropdown(); closeFramesDropdown();">

    <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·ÙˆØ· -->
    <div id="hidden-font-loader">
        <span style="font-family: 'Amiri', serif;">Ø£</span>
        <!-- ... (Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø®Ø·ÙˆØ·) ... -->
        <span style="font-family: 'Tajawal', sans-serif;">Ø£</span>
    </div>

    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
        <!-- Login Overlay -->
    <div id="login-overlay" class="fixed inset-0 z-50 flex items-center justify-center p-4 transition-all duration-500" style="display: none; background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(12px);">
        
        <div id="preparing-studio-screen" class="hidden absolute inset-0 z-[60] flex flex-col items-center justify-center overflow-hidden">
            <div class="absolute inset-0 bg-[#0f172a]">
                <div class="absolute inset-0 bg-gradient-to-tr from-indigo-500/20 via-purple-500/20 to-pink-500/20 animate-pulse"></div>
                <div class="absolute top-0 left-0 w-full h-full opacity-30" style="background-image: radial-gradient(#4f46e5 1px, transparent 1px); background-size: 32px 32px;"></div>
            </div>
            
            <div class="relative z-10 flex flex-col items-center">
                <div class="relative w-32 h-32 mb-8">
                    <div class="absolute inset-0 border-4 border-indigo-500/20 rounded-full animate-[spin_3s_linear_infinite]"></div>
                    <div class="absolute inset-2 border-4 border-t-indigo-400 border-r-transparent border-b-purple-400 border-l-transparent rounded-full animate-[spin_2s_linear_infinite_reverse]"></div>
                    <div class="absolute inset-6 border-4 border-indigo-300/30 rounded-full animate-ping"></div>
                    
                    <div class="absolute inset-0 flex items-center justify-center transform transition-all duration-500">
                        <i class="fas fa-magic text-3xl bg-clip-text text-transparent bg-gradient-to-r from-indigo-200 to-purple-200 animate-pulse filter drop-shadow-[0_0_10px_rgba(139,92,246,0.5)]"></i>
                    </div>
                </div>
                
                <h2 class="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-indigo-200 to-white mb-3 animate-pulse">Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ù…Ø³Ø§Ø­ØªÙƒ</h2>
                <div class="flex items-center gap-2 px-4 py-2 bg-white/5 rounded-full border border-white/10 backdrop-blur-md">
                    <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                    <p class="text-indigo-200 text-xs font-medium tracking-wide">ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…ØµÙ…Ù…...</p>
                </div>
            </div>
        </div>

        <!-- Main Login Card -->
        <div class="login-container relative w-full max-w-sm bg-white/90 backdrop-blur-xl rounded-[30px] shadow-[0_20px_60px_-15px_rgba(0,0,0,0.3)] overflow-hidden border border-white/40 transform transition-all duration-500 hover:shadow-[0_25px_70px_-12px_rgba(79,70,229,0.3)] animate-slideUp">
            
            <!-- Ambient Light Effect -->
            <div class="absolute -top-24 -left-24 w-48 h-48 bg-indigo-500/30 rounded-full blur-3xl pointer-events-none mix-blend-multiply"></div>
            <div class="absolute -bottom-24 -right-24 w-48 h-48 bg-purple-500/30 rounded-full blur-3xl pointer-events-none mix-blend-multiply"></div>

            <div class="relative z-10 p-8">
                <!-- Close Button -->
                <button onclick="toggleLoginOverlay()" class="absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all duration-300 group z-20">
                    <i class="fas fa-times text-sm group-hover:rotate-90 transition-transform"></i>
                </button>

                <!-- Header Section -->
                <div class="text-center mb-8 pt-2">
                    <div class="relative w-20 h-20 mx-auto mb-5 group">
                        <div class="absolute inset-0 bg-gradient-to-tr from-indigo-500 to-purple-500 rounded-2xl rotate-6 group-hover:rotate-12 transition-transform duration-500 opacity-20"></div>
                        <div class="absolute inset-0 bg-[#6366f1] rounded-2xl shadow-xl flex items-center justify-center transform transition-transform duration-500 group-hover:-translate-y-1">
                            <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¨Ø§Ù„ÙŠØª Ø¨Ø®Ù„ÙÙŠØ© Ø²Ø±Ù‚Ø§Ø¡ Ù…Ø«Ù„ Ø§Ù„Ù‡ÙŠØ¯Ø± -->
                            <i class="fas fa-palette text-3xl text-white"></i>
                        </div>
                    </div>
                    <h2 class="text-2xl font-black text-slate-800 tracking-tight mb-2">Ø£Ø³ØªÙˆØ¯ÙŠÙˆ Despro</h2>
                    <div class="flex items-center justify-center gap-1 text-[13px] font-bold text-gray-500">
                        <span>Ù„ØªÙ†Ø¨Ø¶Ù Ø£ÙÙƒØ§Ø±Ùƒ.. Ø¨Ø§Ù„Ø­ÙŠØ§Ø©</span>
                        <span>âœ¨</span>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="space-y-5 mb-8">
                    <div class="relative group">
                        <div class="absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none z-10">
                            <i class="fas fa-key text-gray-300 group-focus-within:text-indigo-500 transition-colors duration-300"></i>
                        </div>
                        <input 
                            type="text" 
                            id="login-code-input" 
                            class="block w-full py-4 pr-12 pl-4 text-center text-lg font-bold tracking-[0.2em] text-gray-800 bg-gray-50/50 border border-gray-200 rounded-2xl focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 placeholder-gray-300 transition-all duration-300 outline-none shadow-sm group-hover:bg-white" 
                            placeholder="CODE" 
                            autocomplete="off"
                            onkeypress="if(event.key==='Enter') verifyCode()"
                        >
                    </div>

                    <button id="login-btn" onclick="verifyCode()" class="relative w-full py-4 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 hover:from-indigo-400 hover:via-purple-400 hover:to-pink-400 text-white font-bold rounded-2xl shadow-lg shadow-indigo-500/25 transform active:scale-[0.98] transition-all duration-300 overflow-hidden group">
                        <span id="login-btn-text" class="relative z-10 flex items-center justify-center gap-2">
                            <span>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ</span>
                            <i class="fas fa-arrow-left text-sm group-hover:-translate-x-1 transition-transform"></i>
                        </span>
                        <span id="login-btn-spinner" class="hidden absolute inset-0 z-20 flex items-center justify-center bg-inherit">
                            <i class="fas fa-circle-notch fa-spin text-xl"></i>
                        </span>
                        <div class="absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    </button>
                    
                    <!-- Ø¹Ù†ØµØ± Ù…Ø®ÙÙŠ Ù„ØªÙˆØ§ÙÙ‚ Ø§Ù„ÙƒÙˆØ¯ -->
                    <div id="login-loading" class="hidden"></div>
                </div>

                <!-- Footer Services -->
                <div class="grid grid-cols-3 gap-3">
                    <a href="subscriptions.html" class="flex flex-col items-center gap-2 p-3 rounded-2xl bg-gray-50 hover:bg-amber-50 border border-transparent hover:border-amber-100 transition-all duration-300 group cursor-pointer">
                        <div class="w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fas fa-crown text-amber-600 text-xs"></i>
                        </div>
                        <span class="text-[10px] font-bold text-gray-500 group-hover:text-amber-700">Ø§Ø´ØªØ±Ø§Ùƒ</span>
                    </a>
                    
                    <a href="https://wa.me/966531333714" target="_blank" class="flex flex-col items-center gap-2 p-3 rounded-2xl bg-gray-50 hover:bg-green-50 border border-transparent hover:border-green-100 transition-all duration-300 group cursor-pointer">
                        <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fab fa-whatsapp text-green-600 text-sm"></i>
                        </div>
                        <span class="text-[10px] font-bold text-gray-500 group-hover:text-green-700">Ø¯Ø¹Ù… ÙÙ†ÙŠ</span>
                    </a>
                    
                     <a href="https://wa.me/966531333714?text=Ø§Ø³ØªÙØ³Ø§Ø±" target="_blank" class="flex flex-col items-center gap-2 p-3 rounded-2xl bg-gray-50 hover:bg-blue-50 border border-transparent hover:border-blue-100 transition-all duration-300 group cursor-pointer">
                        <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fas fa-question text-blue-600 text-xs"></i>
                        </div>
                        <span class="text-[10px] font-bold text-gray-500 group-hover:text-blue-700">Ø§Ø³ØªÙØ³Ø§Ø±</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ (Ù„Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ) -->
    <div id="startup-overlay" style="display: none;">
        <div class="spinner mb-4"></div>
        <div class="loading-text">Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø£Ø³ØªÙˆØ¯ÙŠÙˆ Despro...</div>
    </div>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© -->
    <div id="asset-window">
        <div id="asset-header">
            <span>ğŸ¨ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ù„Ø¨</span>
            <button onclick="document.getElementById('asset-window').style.display='none'" class="text-white hover:text-red-400"><i class="fas fa-times"></i></button>
        </div>
        <div id="asset-content">
            <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‡Ù†Ø§ -->
        </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØµØ¯ÙŠØ± -->
    <div id="export-overlay"><div class="spinner mb-4"></div><div class="text-white font-bold text-xl">Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©...</div></div>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø© (Ø§Ù„Ù…ØµØºØ±Ø©) -->
    <div id="info-modal" style="display: none; position: fixed; inset: 0; background: rgba(15, 23, 42, 0.4); z-index: 100001; align-items: center; justify-content: center; backdrop-filter: blur(2px);">
        <div class="bg-white/95 backdrop-blur rounded-2xl shadow-2xl border border-indigo-100 p-4 max-w-[280px] mx-4 text-center transform animate-bounce-in relative">
            
            <div class="flex items-center gap-2 justify-center mb-2 border-b border-gray-100 pb-2">
                <div id="info-modal-icon" class="text-xl">ğŸ’¡</div>
                <h3 id="info-modal-title" class="text-sm font-bold text-slate-800">ØªÙ†Ø¨ÙŠÙ‡</h3>
            </div>
            
            <p id="info-modal-message" class="text-slate-600 text-xs font-semibold mb-3 leading-relaxed"></p>
            
            <button onclick="closeInfoModal()" class="w-full bg-[#6366f1] text-white hover:bg-[#4f46e5] px-4 py-1.5 rounded-lg text-xs font-bold transition shadow-md hover:shadow-lg">
                Ø­Ø³Ù†Ø§Ù‹
            </button>
        </div>
    </div>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© -->
    <div id="confirm-modal" style="display: none; position: fixed; inset: 0; background: rgba(15, 23, 42, 0.4); z-index: 100001; align-items: center; justify-content: center; backdrop-filter: blur(2px);">
        <div class="bg-white/95 backdrop-blur rounded-2xl shadow-2xl border border-red-100 p-4 max-w-[280px] mx-4 text-center transform animate-bounce-in relative">
            <div class="flex items-center gap-2 justify-center mb-2 border-b border-gray-100 pb-2">
                <div id="confirm-modal-icon" class="text-xl">âš ï¸</div>
                <h3 id="confirm-modal-title" class="text-sm font-bold text-slate-800">ØªØ£ÙƒÙŠØ¯</h3>
            </div>
            <p id="confirm-modal-message" class="text-slate-600 text-xs font-semibold mb-3 leading-relaxed"></p>
            <div class="flex gap-2">
                <button id="confirm-modal-yes" class="flex-1 bg-[#ef4444] text-white hover:bg-[#dc2626] px-4 py-1.5 rounded-lg text-xs font-bold transition shadow-md hover:shadow-lg">
                    Ù†Ø¹Ù…
                </button>
                <button onclick="closeConfirmModal(false)" class="flex-1 bg-gray-200 text-slate-700 hover:bg-gray-300 px-4 py-1.5 rounded-lg text-xs font-bold transition">
                    Ù„Ø§
                </button>
            </div>
        </div>
    </div>
    
    <div id="save-modal">
        <div class="w-full h-full max-w-[95vw] md:max-w-6xl max-h-[95vh] bg-slate-900 rounded-2xl shadow-2xl flex overflow-hidden border border-slate-700 mx-4">
            
            <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© -->
            <div class="flex-1 bg-[#0f172a] relative p-6 flex items-center justify-center">
                <!-- Ø®Ù„ÙÙŠØ© Ø´Ø¨ÙƒÙŠØ© Ø®ÙÙŠÙØ© -->
                <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#6366f1 1px, transparent 1px); background-size: 20px 20px;"></div>
                
                <div class="relative shadow-2xl h-full w-full flex items-center justify-center z-10 pb-4">
                    <img id="save-img" class="max-h-full max-w-full object-contain bg-white transition-transform duration-300 shadow-xl" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©">
                </div>
            </div>

            <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª -->
            <div class="w-[320px] bg-slate-800 border-r border-slate-700 flex flex-col z-20 shadow-xl">
                 <!-- Ø±Ø£Ø³ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
                 <div class="p-6 pb-4 border-b border-slate-700/50">
                     <h2 class="text-xl font-extrabold text-white mb-1 flex items-center gap-2">
                        <i class="fas fa-print text-[#6366f1]"></i> Ø·Ø¨Ø§Ø¹Ø© ÙˆØªØµØ¯ÙŠØ±
                     </h2>
                     <p class="text-slate-400 text-[11px] font-bold">Ù…Ø¹Ø§ÙŠÙ†Ø© ÙˆØªØ®ØµÙŠØµ Ø·Ø¨Ø§Ø¹Ø© A4</p>
                 </div>
                 
                 <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ…Ø±ÙŠØ± -->
                 <div class="flex-1 overflow-y-auto p-6 space-y-6">
                     
                     <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø³Ø® -->
                     <div class="bg-slate-700/30 p-4 rounded-xl border border-slate-600/50">
                         <div class="flex items-center justify-between mb-3">
                             <label class="text-slate-200 text-xs font-bold"><i class="fas fa-copy ml-1"></i> Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ø³Ø®:</label>
                             <span class="text-sm text-slate-200 font-bold bg-slate-600/70 px-3 py-1 rounded-full" id="a4-max-text"></span>
                         </div>
                         
                         <div class="flex items-center gap-2">
                             <input type="text" inputmode="numeric" id="a4-count" class="w-full bg-slate-900 border border-slate-600 rounded-lg h-10 text-center font-bold text-white text-lg focus:ring-1 focus:ring-[#6366f1] focus:border-[#6366f1] outline-none transition" oninput="this.value = arabicToEnglish(this.value); updateA4Count()" min="1">
                         </div>
                     </div>

                     <!-- Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
                     <div class="bg-slate-700/30 p-4 rounded-xl border border-slate-600/50 space-y-3">
                         <label class="flex items-center justify-between cursor-pointer group select-none">
                             <div class="flex items-center gap-2">
                                 <div class="w-8 h-8 rounded-full bg-slate-600/50 flex items-center justify-center group-hover:bg-[#6366f1] transition duration-300 text-white">
                                     <i class="fas fa-scissors text-xs"></i>
                                 </div>
                                 <span class="text-slate-200 text-xs font-bold group-hover:text-white transition">ÙÙˆØ§ØµÙ„ Ø§Ù„Ù‚Øµ</span>
                             </div>
                             <div class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="show-cut-lines" checked onchange="updateA4Count()" class="sr-only peer">
                                <div class="w-9 h-5 bg-slate-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-[#6366f1]"></div>
                             </div>
                         </label>
                         
                         <!-- Opacity Control for Cut Lines -->
                         <div class="px-1 pt-2 pb-1">
                             <div class="flex items-center gap-2">
                                 <span class="text-[8px] text-slate-400 font-bold whitespace-nowrap">Ø§Ù„Ø´ÙØ§ÙÙŠØ©:</span>
                                 <input type="range" id="cut-lines-opacity" min="10" max="100" value="100" onchange="updateA4Count()" oninput="document.getElementById('opacity-value').innerText = this.value + '%'" class="flex-1 h-1.5 accent-[#6366f1] rounded-full" style="cursor: pointer;">
                                 <span class="text-[8px] text-slate-400 font-bold w-5 text-right" id="opacity-value">100%</span>
                             </div>
                         </div>
                     </div>

                     <!-- Ù…Ù„Ø§Ø­Ø¸Ø© -->
                     <div class="bg-blue-500/10 border border-blue-500/20 rounded-lg p-3">
                         <p class="text-[10px] text-blue-200 leading-relaxed font-bold flex gap-2">
                             <i class="fas fa-info-circle mt-0.5"></i>
                             ÙŠØªÙ… ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ø§Ø³ØªØºÙ„Ø§Ù„ Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙˆØ±Ù‚Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.
                         </p>
                     </div>
                 </div>

                 <!-- Ø°ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (Ø§Ù„Ø£Ø²Ø±Ø§Ø±) -->
                 <div class="p-6 pt-4 border-t border-slate-700/50 bg-slate-800 flex flex-col gap-3">
                     <button onclick="printDesignDirect()" class="w-full bg-gradient-to-r from-[#6366f1] to-[#4f46e5] text-white py-3.5 rounded-xl font-bold hover:shadow-lg hover:shadow-[#6366f1]/25 border border-white/10 active:scale-[0.98] transition flex items-center justify-center gap-2 group">
                        <i class="fas fa-print text-lg group-hover:animate-pulse"></i> <span>Ø·Ø¨Ø§Ø¹Ø© ÙÙˆØ±ÙŠØ©</span>
                     </button>
                     
                     <div class="grid grid-cols-2 gap-3">
                         <button onclick="downloadImage()" class="bg-slate-700 hover:bg-slate-600 text-white py-3 rounded-xl font-bold transition flex items-center justify-center gap-2 text-xs border border-white/5 active:scale-[0.98]">
                            <i class="fas fa-image text-emerald-400"></i> ØµÙˆØ±Ø©
                         </button>
                         <button onclick="downloadPDF()" class="bg-slate-700 hover:bg-slate-600 text-white py-3 rounded-xl font-bold transition flex items-center justify-center gap-2 text-xs border border-white/5 active:scale-[0.98]">
                            <i class="fas fa-file-pdf text-red-400"></i> PDF
                         </button>
                     </div>

                     <button onclick="closeA4Modal()" class="mt-3 text-slate-300 hover:text-white text-xs font-bold py-2 px-4 transition text-center hover:bg-slate-700/50 rounded-lg border border-slate-600 hover:border-slate-500">
                         Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
                     </button>
                     
                     <!-- Ø²Ø± Premium Ù„ØºÙŠØ± Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† -->
                     <div id="premium-upgrade-btn" class="mt-1">
                         <a href="subscriptions.html" class="flex items-center justify-center gap-1.5 bg-transparent px-4 py-1 rounded-lg transition-all hover:bg-amber-500/5">
                             <span class="text-[9px] font-bold tracking-[0.2em] text-amber-500/70 hover:text-amber-400 transition-colors">
                                 âœ¨ PREMIUM
                             </span>
                         </a>
                     </div>
                     
                     <script>
                         // Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Premium Ù„Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…
                         function updatePremiumBadge() {
                             const btn = document.getElementById('premium-upgrade-btn');
                             if (userTier === 'premium' && btn) {
                                 btn.style.display = 'none';
                             } else if (btn) {
                                 btn.style.display = 'block';
                             }
                         }
                         // ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©
                         const observer = new MutationObserver(() => updatePremiumBadge());
                         observer.observe(document.getElementById('save-modal'), { attributes: true });
                         setTimeout(updatePremiumBadge, 100);
                     </script>
                 </div>
            </div>
            
            <!-- Ø²Ø± Ù‚Ø¯ÙŠÙ… Ù…Ø®ÙÙŠ Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§ÙÙ‚ -->
            <button id="btn-modal-a4" onclick="generateA4Sheet()" class="hidden"></button>
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯ - Ù†Ø§Ø¹Ù… ÙˆØ®ÙÙŠÙ Ù…Ø¹ Ù„ÙˆÙ† ÙˆØ±Ø¯ÙŠ -->
    <div id="new-project-modal" class="hidden fixed inset-0 bg-black/40 z-50 flex items-center justify-center" onclick="if(event.target.id === 'new-project-modal') closeNewProjectModal()">
        <div class="bg-white rounded-2xl p-5 shadow-lg max-w-sm w-full mx-4" onclick="event.stopPropagation()">
            <!-- Ø§Ù„Ø±Ø£Ø³ Ø§Ù„Ø¨Ø³ÙŠØ· -->
            <div class="text-center mb-4">
                <h2 class="text-lg font-bold text-[#1e293b]">Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ØŸ</h2>
                <p class="text-xs text-[#94a3b8] mt-1">Ù„Ø¯ÙŠÙƒ Ø¹Ù…Ù„ Ø­Ø§Ù„ÙŠ Ù„Ù… ÙŠØªÙ… Ø­ÙØ¸Ù‡</p>
            </div>
            
            <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø«Ù„Ø§Ø« Ø¨Ø¬Ø§Ù†Ø¨ Ø¨Ø¹Ø¶ -->
            <div class="flex gap-2 justify-center">
                <button onclick="saveCurrentAsTemplateAndNew()" class="flex-1 bg-[#ec4899] text-white px-3 py-2.5 rounded-lg text-xs font-bold hover:bg-[#db2777] transition-all shadow-sm flex items-center justify-center gap-2 group">
                    <i class="fas fa-save group-hover:scale-110 transition-transform"></i>
                    <span>Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„</span>
                </button>
                
                <button onclick="resetCanvasWithoutSave()" class="flex-1 bg-white border border-[#ef4444] text-[#ef4444] px-3 py-2.5 rounded-lg text-xs font-bold hover:bg-[#fef2f2] hover:border-[#dc2626] transition-all shadow-sm flex items-center justify-center gap-2 group">
                    <i class="fas fa-trash-alt group-hover:scale-110 transition-transform"></i>
                    <span>Ø¹Ø¯Ù… Ø§Ù„Ø­ÙØ¸</span>
                </button>
                
                <button onclick="closeNewProjectModal()" class="flex-1 bg-white border border-[#cbd5e1] text-[#64748b] px-3 py-2.5 rounded-lg text-xs font-bold hover:bg-[#f8fafc] hover:border-[#94a3b8] transition-all shadow-sm flex items-center justify-center gap-2 group">
                    <i class="fas fa-times group-hover:scale-110 transition-transform"></i>
                    <span>Ø¥Ù„ØºØ§Ø¡</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø­ÙØ¸ Ø¨Ø§Ø³Ù… - Ù†Ø§Ø¹Ù… ÙˆØ®ÙÙŠÙ Ù…Ø¹ Ù„ÙˆÙ† ÙˆØ±Ø¯ÙŠ -->
    <div id="save-as-modal" class="hidden fixed inset-0 bg-black/40 z-50 flex items-center justify-center" onclick="if(event.target.id === 'save-as-modal') closeSaveAsModal()">
        <div class="bg-white rounded-2xl p-5 shadow-lg max-w-sm w-full mx-4" onclick="event.stopPropagation()">
            <!-- Ø§Ù„Ø±Ø£Ø³ Ø§Ù„Ø¨Ø³ÙŠØ· -->
            <div class="text-center mb-4">
                <h2 class="text-lg font-bold text-[#1e293b] flex items-center justify-center gap-2">
                    <i class="fas fa-save text-[#ec4899]"></i>
                    <span>Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„</span>
                </h2>
                <p class="text-xs text-[#94a3b8] mt-1">Ø§Ø­ÙØ¸ Ø¹Ù…Ù„Ùƒ ÙƒÙ‚Ø§Ù„Ø¨ Ù…Ø­ÙÙˆØ¸</p>
            </div>
            
            <!-- Ø­Ù‚Ù„ Ø§Ù„Ø§Ø³Ù… -->
            <div class="mb-4">
                <label class="text-xs font-bold text-[#1e293b] block mb-2">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…Ù„:</label>
                <input type="text" id="save-as-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…Ù„..." class="w-full px-3 py-2.5 border border-[#e2e8f0] rounded-lg text-sm outline-none focus:border-[#6366f1] focus:bg-[#f0f9ff] text-[#1e293b] transition-all" />
                <p class="text-xs text-[#94a3b8] mt-1.5">ğŸ’¡ ÙŠØªÙ… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¹Ù…Ù„ Ø¨ØµÙŠØºØ© JSON.</p>
            </div>
            
            <!-- Ø®ÙŠØ§Ø± Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¥Ø°Ø§ ÙˆÙØ¬Ø¯Øª Ù…Ù„Ø§Ø­Ø¸Ø§Øª) -->
            <div id="save-notes-option" class="hidden mb-4">
                <!-- Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… -->
                <label id="notes-option-premium" class="flex items-center gap-2 cursor-pointer p-2.5 bg-[#fef3c7] border border-[#fbbf24] rounded-lg hover:bg-[#fef9c3] transition-all">
                    <input type="checkbox" id="save-with-notes" class="w-4 h-4 accent-[#f59e0b] cursor-pointer" checked />
                    <span class="text-xs font-bold text-[#92400e] flex items-center gap-1">
                        <i class="fas fa-sticky-note"></i>
                        Ø­ÙØ¸ Ù…Ø¹ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
                    </span>
                </label>
                <!-- Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠÙŠÙ† -->
                <div id="notes-option-free" class="hidden flex items-center gap-2 p-2.5 bg-[#f1f5f9] border border-[#cbd5e1] rounded-lg opacity-60 cursor-not-allowed">
                    <input type="checkbox" disabled class="w-4 h-4 accent-gray-400 cursor-not-allowed" />
                    <span class="text-xs font-bold text-[#64748b] flex items-center gap-1">
                        <i class="fas fa-sticky-note"></i>
                        Ø­ÙØ¸ Ù…Ø¹ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
                    </span>
                    <span class="text-xs font-bold text-[#f59e0b] mr-auto flex items-center gap-1">
                        <i class="fas fa-crown"></i>
                        Premium Members
                    </span>
                </div>
            </div>
            
            <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
            <div class="flex gap-2 justify-center mb-3">
                <button onclick="executeSaveAsFile()" class="flex-1 bg-[#ec4899] text-white px-3 py-2.5 rounded-lg text-xs font-bold hover:bg-[#db2777] transition-all shadow-sm flex items-center justify-center gap-2 group">
                    <i class="fas fa-save group-hover:scale-110 transition-transform"></i>
                    <span>Ø­ÙØ¸ Ø§Ù„Ø¢Ù†</span>
                </button>
                <button onclick="closeSaveAsModal()" class="flex-1 bg-white border border-[#cbd5e1] text-[#64748b] px-3 py-2.5 rounded-lg text-xs font-bold hover:bg-[#f8fafc] hover:border-[#94a3b8] transition-all shadow-sm flex items-center justify-center gap-2 group">
                    <i class="fas fa-times group-hover:scale-110 transition-transform"></i>
                    <span>Ø¥Ù„ØºØ§Ø¡</span>
                </button>
            </div>

            <!-- Ù…Ù„Ø§Ø­Ø¸Ø© ØµØºÙŠØ±Ø© Ù…Ø¹ Ø£ÙŠÙ‚ÙˆÙ†Ø© -->
            <div class="bg-[#f0f9ff] border border-[#bfdbfe] rounded-lg p-2.5 text-center">
                <p class="text-xs text-[#1e40af] font-medium flex items-center justify-center gap-1.5 direction-rtl">
                    ÙŠÙ…ÙƒÙ†Ùƒ ÙØªØ­Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø¹Ø¨Ø±
                    <span class="inline-flex items-center gap-1 text-[#6366f1] text-[11px] font-bold mr-1">
                        <i class="fas fa-folder-open"></i> ÙØªØ­ Ù…Ù„Ù
                    </span>
                </p>
            </div>
            <input type="hidden" id="save-as-callback">
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­ - Ù†Ø§Ø¹Ù… ÙˆØ¹ØµØ±ÙŠ - ØªÙ… Ø±ÙØ¹ Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶ ÙÙˆÙ‚ ÙƒÙ„ Ø´ÙŠØ¡ -->
    <div id="success-modal" class="hidden fixed inset-0 bg-black/40 z-[200000] flex items-center justify-center backdrop-blur-sm transition-all duration-300 opacity-0" onclick="closeSuccessModal()">
        <div class="bg-white rounded-2xl p-6 shadow-2xl max-w-[300px] w-full mx-4 transform transition-all duration-300 scale-90" id="success-modal-content" onclick="event.stopPropagation()">
            <div class="text-center">
                <div class="w-14 h-14 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-3 shadow-inner">
                    <i class="fas fa-check text-2xl text-green-500 animate-pulse"></i>
                </div>
                <h2 class="text-base font-bold text-[#1e293b] mb-1" id="success-modal-title">ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</h2>
                <p class="text-[11px] text-[#64748b] mb-5 leading-relaxed" id="success-modal-message">ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¨Ù†Ø¬Ø§Ø­</p>
                <button onclick="closeSuccessModal()" class="w-full bg-[#ec4899] text-white px-4 py-2.5 rounded-xl text-xs font-bold hover:bg-[#db2777] transition-all shadow-md flex items-center justify-center gap-2 group hover:shadow-lg hover:-translate-y-0.5">
                    <span>Ø­Ø³Ù†Ø§Ù‹</span>
                </button>
            </div>
        </div>
    </div>


    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„ØªØ¯Ø±Ø¬ Ø§Ù„Ù„ÙˆÙ†ÙŠ - ØªÙ… Ø¥Ù„ØºØ§Ø¤Ù‡ ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ø£Ø¯ÙˆØ§Øª ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->


    <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
    <div class="max-w-7xl mx-auto p-4 grid grid-cols-1 lg:grid-cols-12 gap-6 h-screen-lg">
        
        <!-- Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
        <div class="lg:col-span-4 bg-white p-5 rounded-2xl shadow-md border border-[#cbd5e1] flex flex-col gap-4 h-fit" onclick="event.stopPropagation()">
            
            <div class="flex items-center justify-center border-b border-[#e2e8f0] pb-3">
                <div class="text-center">
                    <div style="display: inline-block;">
                        <!-- Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ… - ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ø§Ù„Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
                        <!-- Ø§Ø³Ù… Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ - ÙŠØ¸Ù‡Ø± Ù„ØºÙŠØ± Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† (Ø§ÙØªØ±Ø§Ø¶ÙŠ) -->
                        <div id="studio-default-display" style="display: block; white-space: nowrap;">
                            <div style="display: inline-flex; align-items: center; gap: 8px;">
                                <div style="width: 32px; height: 32px; background: #6366f1; border-radius: 8px; display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <i class="fas fa-palette text-white" style="font-size: 14px;"></i>
                                </div>
                                <span style="font-size: 24px; font-weight: bold; color: #1e293b;">Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ù…ØµÙ…Ù…</span>
                                <span style="margin-right: 4px;">âœ¨</span>
                            </div>
                        </div>
                        <!-- Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ Ù…Ø¹ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© - ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙÙ‚Ø· -->
                        <div id="studio-name-display" style="display: none; white-space: nowrap;">
                            <div style="display: inline-flex; align-items: center; gap: 8px;">
                                <div style="width: 32px; height: 32px; background: #6366f1; border-radius: 8px; display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <i class="fas fa-palette text-white" style="font-size: 14px;"></i>
                                </div>
                                <span id="studio-name-text" style="font-size: 24px; font-weight: bold; color: #1e293b;">Ø£Ø³ØªÙˆØ¯ÙŠÙˆ</span>
                                <span style="margin-right: 4px;">âœ¨</span>
                            </div>
                        </div>
                        <!-- Ø§Ù„ÙˆØµÙ -->
                        <p class="text-[10px] text-slate-600 font-bold" id="studio-subtitle-display" style="margin-top: 6px;">Ù…Ø³Ø§Ø­Ø© Ù…Ø®ØµØµØ© <span style="margin: 0 4px; color: #64748b;">|</span>Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ù†Ø²Ù„ÙŠØ© <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline; vertical-align: middle; margin-right: 4px; color: #64748b;"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M21 12l-9 -9l-9 9h2v7a2 2 0 0 0 2 2h6" /><path d="M9 21v-6a2 2 0 0 1 2 -2h2c.39 0 .754 .112 1.061 .304" /><path d="M19 21.5l2.518 -2.58a1.74 1.74 0 0 0 0 -2.413a1.627 1.627 0 0 0 -2.346 0l-.168 .172l-.168 -.172a1.627 1.627 0 0 0 -2.346 0a1.74 1.74 0 0 0 0 2.412l2.51 2.59l0 -.009" /></svg></p>
                    </div>
                </div>
            </div>

            <!-- Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØµÙˆØµ -->
            <div id="add-text-container" class="space-y-2 bg-[#f8fafc] p-3 rounded-xl border border-[#e2e8f0]">
                <label class="text-xs font-bold text-[#1e293b]">Ø¥Ø¶Ø§ÙØ© Ù†ØµÙˆØµ</label>
                <div class="flex flex-col gap-2">
                    <textarea id="user-text-input" rows="2" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..." class="w-full p-2 bg-white border border-[#cbd5e1] rounded-lg text-sm outline-none focus:border-[#6366f1] text-[#1e293b] resize-none"></textarea>
                    <button onclick="addUserText()" class="bg-[#6366f1] text-white px-4 py-2 rounded-lg hover:bg-[#4f46e5] flex items-center justify-center border border-[#6366f1] text-sm font-bold shadow-sm w-full">
                        <i class="fas fa-plus ml-2"></i> Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Øµ
                    </button>
                </div>
            </div>

            <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
            <div class="grid grid-cols-3 gap-2">
                <label class="col-span-2 bg-white border border-dashed border-[#6366f1] py-3 rounded-lg text-[#1e293b] hover:bg-[#f8fafc] text-xs font-bold flex items-center justify-center gap-1 cursor-pointer transition group">
                    <i class="fas fa-image text-lg text-[#6366f1] group-hover:scale-110 transition-transform"></i> ØµÙˆØ±Ø©
                    <input type="file" onchange="addRegularImage(this)" class="hidden" accept="image/*">
                </label>
                <button onclick="createNewProject()" class="bg-white border border-[#cbd5e1] py-2 rounded-lg text-[#1e293b] text-xs font-bold hover:bg-[#f8fafc] hover:border-[#6366f1] flex flex-col items-center gap-1 group"><i class="fas fa-file-circle-plus text-[#6366f1] group-hover:scale-110 transition-transform"></i> Ø¬Ø¯ÙŠØ¯</button>
                
                <!-- Ø²Ø± Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª Ù…Ø¹ Dropdown -->
                <div class="relative" onclick="event.stopPropagation();">
                    <button onclick="toggleFrameDropdown()" class="w-full bg-white border border-[#cbd5e1] py-2 rounded-lg text-[#1e293b] text-xs font-bold hover:bg-[#f8fafc] hover:border-[#6366f1] flex flex-col items-center gap-1 group min-w-[50px]">
                        <i class="far fa-square text-[#6366f1] group-hover:scale-110 transition-transform"></i> Ø¥Ø·Ø§Ø±
                    </button>
                    
                    <!-- Dropdown Menu -->
                    <div id="frames-dropdown" class="hidden absolute top-full left-0 mt-2 bg-white border border-[#cbd5e1] rounded-lg shadow-lg z-50 p-1 w-[110px]">
                        <button onclick="addFrameType('square')" class="w-full px-2 py-1.5 text-left text-[10px] font-bold text-[#1e293b] hover:bg-[#f0f4ff] hover:text-[#6366f1] rounded transition flex items-center gap-2 mb-1">
                            <i class="far fa-square text-sm"></i> Ù…Ø±Ø¨Ø¹
                        </button>
                        <button onclick="addFrameType('rounded')" class="w-full px-2 py-1.5 text-left text-[10px] font-bold text-[#1e293b] hover:bg-[#f0f4ff] hover:text-[#6366f1] rounded transition flex items-center gap-2 mb-1">
                            <i class="far fa-square text-sm" style="border-radius: 6px;"></i> Ù…Ù†Ø­Ù†ÙŠ
                        </button>
                        <button onclick="addFrameType('circle')" class="w-full px-2 py-1.5 text-left text-[10px] font-bold text-[#1e293b] hover:bg-[#f0f4ff] hover:text-[#6366f1] rounded transition flex items-center gap-2">
                             <i class="far fa-circle text-sm"></i> Ø¯Ø§Ø¦Ø±Ø©
                        </button>
                    </div>
                </div>
                
                <!-- Ø²Ø± Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ù…Ø¹ Dropdown -->
                <div class="relative" onclick="event.stopPropagation();">
                    <button onclick="addShape()" class="w-full bg-white border border-[#cbd5e1] py-2 rounded-lg text-[#1e293b] text-xs font-bold hover:bg-[#f8fafc] hover:border-[#6366f1] flex flex-col items-center gap-1 group"><i class="fas fa-square-full text-[#6366f1] group-hover:scale-110 transition-transform"></i> Ø´ÙƒÙ„</button>
                    
                    <!-- Dropdown Menu -->
                    <div id="shapes-dropdown" class="hidden absolute top-full left-0 right-0 mt-2 bg-white border border-[#cbd5e1] rounded-lg shadow-lg z-40 p-2">
                        <button onclick="addShapeType('square')" class="w-full px-3 py-2 text-left text-[11px] font-bold text-[#1e293b] hover:bg-[#f0f4ff] hover:border-l-4 hover:border-l-[#6366f1] rounded transition flex items-center gap-2">
                            <div class="w-4 h-4 bg-[#6366f1] rounded" style="border-radius: 2px;"></div> Ù…Ø±Ø¨Ø¹
                        </button>
                        <button onclick="addShapeType('circle')" class="w-full px-3 py-2 text-left text-[11px] font-bold text-[#1e293b] hover:bg-[#f0f4ff] hover:border-l-4 hover:border-l-[#6366f1] rounded transition flex items-center gap-2">
                            <div class="w-4 h-4 bg-[#6366f1] rounded-full"></div> Ø¯Ø§Ø¦Ø±Ø©
                        </button>
                        <button onclick="addShapeType('line')" class="w-full px-3 py-2 text-left text-[11px] font-bold text-[#1e293b] hover:bg-[#f0f4ff] hover:border-l-4 hover:border-l-[#6366f1] rounded transition flex items-center gap-2">
                            <div class="w-4 h-0.5 bg-[#6366f1]"></div> Ø®Ø·
                        </button>
                        <button onclick="addShapeType('rounded')" class="w-full px-3 py-2 text-left text-[11px] font-bold text-[#1e293b] hover:bg-[#f0f4ff] hover:border-l-4 hover:border-l-[#6366f1] rounded transition flex items-center gap-2">
                            <div class="w-4 h-4 bg-[#6366f1] rounded-lg" style="border-radius: 4px;"></div> Ù…Ù†Ø­Ù†Ù‰
                        </button>
                    </div>
                </div>
                
                <label class="bg-white border border-[#cbd5e1] py-2 rounded-lg text-[#1e293b] text-xs font-bold hover:bg-[#f8fafc] hover:border-[#6366f1] flex flex-col items-center gap-1 cursor-pointer group transition">
                    <i class="fas fa-folder-open text-[#6366f1] group-hover:scale-110 transition-transform"></i> ÙØªØ­ Ù…Ù„Ù
                    <input type="file" onchange="handleUniversalFile(this)" class="hidden" accept=".template,.json,.pdf,.tif,.tiff,.psd,.png,.jpg,.jpeg,.webp,.gif">
                </label>
            </div>

            <!-- Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ø¹Ù…Ù„ (ÙŠØ¯ÙˆÙŠ ÙÙ‚Ø· - 10x10 Ø§ÙØªØ±Ø§Ø¶ÙŠ) -->
            <div id="dimensions-container" class="bg-[#f8fafc] p-3 rounded-xl border border-[#e2e8f0]">
                <label class="text-xs font-bold text-[#1e293b] mb-2 block flex items-center gap-2">
                    <i class="fas fa-ruler-combined text-[#6366f1]"></i> Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„ØªØµÙ…ÙŠÙ… (Ø³Ù…)
                </label>
                
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <div class="relative">
                        <label class="text-[9px] text-[#64748b] font-bold block mb-1">Ø§Ù„Ø¹Ø±Ø¶ (Width)</label>
                        <input type="text" inputmode="decimal" id="custom-width" value="10" class="w-full pl-8 px-2 py-1.5 border border-[#cbd5e1] rounded-lg text-sm outline-none focus:border-[#6366f1] text-center font-bold text-[#1e293b]" onfocus="this.select()" oninput="this.value = arabicToEnglish(this.value); applyCustomSizeSimple()">
                        <span class="absolute left-2 top-[26px] text-[12px] font-bold text-[#64748b] dark:text-slate-300">Ø³Ù…</span>
                    </div>
                    <div class="relative">
                        <label class="text-[9px] text-[#64748b] font-bold block mb-1">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ (Height)</label>
                        <input type="text" inputmode="decimal" id="custom-height" value="10" class="w-full pl-8 px-2 py-1.5 border border-[#cbd5e1] rounded-lg text-sm outline-none focus:border-[#6366f1] text-center font-bold text-[#1e293b]" onfocus="this.select()" oninput="this.value = arabicToEnglish(this.value); applyCustomSizeSimple()">
                        <span class="absolute left-2 top-[26px] text-[12px] font-bold text-[#64748b] dark:text-slate-300">Ø³Ù…</span>
                    </div>
                </div>
                
                <div class="mt-2 text-center">
                    <span id="size-display" class="text-[10px] font-bold text-[#64748b] bg-white px-2 py-1 rounded border border-[#e2e8f0]">1181 Ã— 1181 px</span>
                </div>
                
                <!-- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù€ Zoom -->
                <div id="zoom-container" class="mt-4 bg-gradient-to-b from-[#f0f9ff] to-[#e0f2fe] p-3 rounded-lg border border-[#7dd3fc]">
                    <div class="flex justify-between items-center mb-2">
                        <label class="text-[9px] text-[#0c4a6e] font-bold">ğŸ” Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø²ÙˆÙ…</label>
                        <span id="zoom-display" class="text-[10px] font-bold text-[#0c4a6e] bg-white px-2 py-0.5 rounded">50%</span>
                    </div>
                    <input type="range" id="zoom-slider" min="25" max="200" value="50" class="w-full cursor-pointer" oninput="setCustomZoom(this.value)">
                    <div class="flex gap-1 mt-2">
                        <button onclick="setCustomZoom(50)" class="flex-1 bg-white border border-[#7dd3fc] text-[#0c4a6e] text-[9px] font-bold py-1 rounded hover:bg-[#e0f2fe]">50%</button>
                        <button onclick="setCustomZoom(75)" class="flex-1 bg-white border border-[#7dd3fc] text-[#0c4a6e] text-[9px] font-bold py-1 rounded hover:bg-[#e0f2fe]">75%</button>
                        <button onclick="setCustomZoom(100)" class="flex-1 bg-white border border-[#7dd3fc] text-[#0c4a6e] text-[9px] font-bold py-1 rounded hover:bg-[#e0f2fe]">100%</button>
                        <button onclick="setCustomZoom(150)" class="flex-1 bg-white border border-[#7dd3fc] text-[#0c4a6e] text-[9px] font-bold py-1 rounded hover:bg-[#e0f2fe]">150%</button>
                    </div>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø±Ø³Ù…ÙŠØ© -->
            <div id="assets-library-container" class="bg-[#f8fafc] p-3 rounded-xl border border-[#e2e8f0]">
                <div class="flex justify-between items-center cursor-pointer" onclick="toggleAssetsLibrary()">
                    <label class="text-xs font-bold text-[#1e293b] flex items-center gap-2 cursor-pointer">
                        <i class="fas fa-shapes text-[#6366f1]"></i> Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± <span class="text-[#cbd5e1] mx-1">|</span> <span class="text-xs font-bold text-[#1e293b] flex items-center gap-1">Ù…ÙƒØªØ¨Ø© Ù…ØªØ¬Ø¯Ø¯Ø©</span>
                    </label>
                    <i id="assets-library-arrow" class="fas fa-chevron-left text-[#64748b] text-xs transition-transform duration-200" style="transform: rotate(-90deg);"></i>
                </div>
                
                <div id="assets-library-content" class="mt-3 flex flex-col gap-2">
                    <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ù„Ù„ØªØµÙ†ÙŠÙØ§Øª -->
                    <div class="w-full">
                        <select id="assets-category-select" class="w-full p-2 text-xs font-bold bg-white border border-[#cbd5e1] rounded-lg text-[#1e293b] outline-none focus:border-[#6366f1]" onchange="loadAssetsCategory()">
                            <option value="">ğŸ“‚ Ø§Ø®ØªØ± ØªØµÙ†ÙŠÙØ§Ù‹...</option>
                        </select>
                    </div>
                    
                    <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ø¹Ù†Ø§ØµØ± -->
                    <div id="assets-grid" class="grid grid-cols-3 gap-2 max-h-[200px] overflow-y-auto p-1 bg-white rounded-lg border border-[#e2e8f0]">
                        <div class="col-span-3 text-center text-[10px] text-[#64748b] py-4">Ø§Ø®ØªØ± ØªØµÙ†ÙŠÙØ§Ù‹ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†Ø§ØµØ±</div>
                    </div>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ø·Ø¨Ù‚Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
            <div id="layers-container" class="bg-[#f8fafc] p-3 rounded-xl border border-[#e2e8f0]">
                <div class="flex justify-between items-center cursor-pointer" onclick="toggleLayersPanel()">
                    <label class="text-xs font-bold text-[#1e293b] flex items-center gap-2 cursor-pointer">
                        <i class="fas fa-layer-group text-[#ec4899]"></i> Ø§Ù„Ø·Ø¨Ù‚Ø§Øª
                    </label>
                    <i id="layers-panel-arrow" class="fas fa-chevron-left text-[#64748b] text-xs transition-transform duration-200"></i>
                </div>
                
                <div id="layers-panel-content" class="hidden mt-3 flex flex-col gap-1 max-h-[250px] overflow-y-auto">
                    <div id="layers-list" class="space-y-1">
                        <div class="text-center text-[10px] text-[#64748b] py-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„</div>
                    </div>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ø®ØµØ§Ø¦Øµ ÙˆØ§Ù„Ø­ÙØ¸ -->
            <div id="style-panel" class="bg-white p-4 rounded-2xl shadow-lg border border-[#cbd5e1] transition-all" onclick="event.stopPropagation()">
                <div class="flex flex-col gap-3 mb-4 border-b border-[#e2e8f0] pb-3">
                    <span class="text-xs font-black text-[#6366f1] uppercase tracking-wider" id="panel-title">Ø§Ù„ØªØµØ¯ÙŠØ±</span>
                    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø­ÙØ¸ -->
                    <div class="flex flex-col gap-2">
                        <!-- ØµÙ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ: Ø­ÙØ¸ ØµÙˆØ±Ø© + Ø­ÙØ¸ ÙƒÙ…Ù„Ù -->
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="saveWorkDirectly()" class="bg-[#6366f1] text-white px-4 py-2.5 rounded-xl text-xs font-bold hover:bg-[#4f46e5] flex items-center justify-center gap-2 shadow-md transition">
                                <i class="fas fa-image"></i> Ø­ÙØ¸ ØµÙˆØ±Ø©
                            </button>
                            <button onclick="openSaveAsModal()" class="bg-[#6366f1] text-white px-4 py-2.5 rounded-xl text-xs font-bold hover:bg-[#4f46e5] flex items-center justify-center gap-2 shadow-md transition">
                                <i class="fas fa-download"></i> Ø­ÙØ¸ ÙƒÙ…Ù„Ù
                            </button>
                        </div>
                        <!-- Ø²Ø± Ø·Ø¨Ø§Ø¹Ø© A4 ÙƒØ§Ù…Ù„ Ø§Ù„Ø¹Ø±Ø¶ -->
                        <button onclick="generateA4Sheet()" class="w-full bg-[#ec4899] text-white px-4 py-2.5 rounded-xl text-xs font-bold hover:bg-[#db2777] flex items-center justify-center gap-2 shadow-md transition">
                            <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© A4
                        </button>
                    </div>
                </div>

                <div id="no-selection-msg" class="text-center py-4 text-[#64748b] text-xs font-bold opacity-70">
                    ØªØµØ¯ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
                </div>

                <div id="text-controls" class="hidden space-y-4">
                    <input type="hidden" id="font-size">
                    <input type="hidden" id="font-size-input">
                    <input type="hidden" id="font-family">
                </div>

                <div id="frame-controls" class="hidden space-y-4">
                </div>
            </div>
        </div>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ -->
        <div class="lg:col-span-8 flex flex-col gap-1">
            
            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
            <div class="flex flex-wrap items-center bg-white p-2 rounded-xl border border-[#cbd5e1] shadow-sm justify-between gap-y-2 relative" onclick="event.stopPropagation()">
                
                <!-- Ø²Ø± Ø§Ù„Ø¯Ø§Ø±Ùƒ Ù…ÙˆØ¯ - ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„ÙŠØ³Ø±Ù‰ -->
                <button id="theme-toggle-btn" onclick="toggleDarkMode()" class="theme-toggle-btn absolute top-2 left-2 z-10" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">
                    <svg class="theme-sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="background-color: #6366f1; border-radius: 50%; padding: 4px;"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9.173 14.83a4 4 0 1 1 5.657 -5.657" /><path d="M11.294 12.707l.174 .247a7.5 7.5 0 0 0 8.845 2.492a9 9 0 0 1 -14.671 2.914" /><path d="M3 12h1" /><path d="M12 3v1" /><path d="M5.6 5.6l.7 .7" /><path d="M3 21l18 -18" /></svg>
                    <i class="fas fa-moon theme-moon"></i>
                </button>
                
                <!-- Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ù…Ø±ØªØ¨Ø© ÙÙŠ Ø£Ù‚Ø³Ø§Ù… -->
                <div class="w-full flex flex-wrap items-center gap-2 mb-2 pb-2 border-b border-[#e2e8f0]">
                    
                    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ±Ø§Ø¬Ø¹ ÙˆØ§Ù„Ø¥Ø¹Ø§Ø¯Ø© -->
                    <div class="flex items-center gap-1 bg-[#f8fafc] dark:bg-slate-700 px-2 py-1 rounded-lg border border-[#e2e8f0] dark:border-slate-600">
                        <button onclick="undoAction()" class="p-1.5 text-[#64748b] hover:text-[#6366f1] transition" title="ØªØ±Ø§Ø¬Ø¹"><i class="fas fa-undo"></i></button>
                        <div class="w-px h-4 bg-[#e2e8f0]"></div>
                        <button onclick="redoAction()" class="p-1.5 text-[#64748b] hover:text-[#6366f1] transition" title="Ø¥Ø¹Ø§Ø¯Ø©"><i class="fas fa-redo"></i></button>
                    </div>
                    
                    <!-- Ù‚Ø³Ù… Ø§Ù„Ø®Ù„ÙÙŠØ© - BACKGROUND -->
                    <div class="flex flex-col items-center gap-1 bg-[#000000]/5 px-3 py-1.5 rounded-xl border border-[#8b5cf6]/20 min-h-[52px]">
                        <span class="text-[8px] font-extrabold tracking-[0.2em] text-transparent bg-clip-text bg-gradient-to-r from-violet-500 to-purple-600 w-full text-center">
                            BACKGROUND
                        </span>
                        <div class="flex items-center gap-1.5">
                            <label class="h-7 px-2.5 rounded text-[9px] font-bold bg-white text-[#1e293b] hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0] cursor-pointer" title="Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©">
                                <i class="fas fa-fill-drip"></i> Ø§Ù„Ø®Ù„ÙÙŠØ©
                                <div id="bg-color-preview" class="relative w-5 h-5 rounded-full border border-slate-300 shadow-sm" style="background-color: #ffffff;">
                                    <input type="color" id="main-bg-color" oninput="setCardBackgroundColor(this.value)" value="#ffffff" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
                                </div>
                            </label>
                            <button onclick="toggleTransparentMode()" id="btn-transparent" class="h-7 px-2.5 rounded text-[9px] font-bold bg-white text-[#1e293b] hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0]" title="ØªÙØ¹ÙŠÙ„/Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø´ÙØ§ÙÙŠØ©">
                                <i class="fas fa-chess-board"></i> Ø´ÙØ§Ù
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ù‚Ø³Ù… Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø°ÙƒÙŠØ© - SMART TOOLS -->
                    <div class="flex flex-col items-center gap-1 bg-[#000000]/5 px-3 py-1.5 rounded-xl border border-[#6366f1]/20 min-h-[52px] relative">
                        <span class="text-[8px] font-extrabold tracking-[0.2em] text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 w-full text-center">
                            SMART TOOLS
                        </span>
                        <div class="flex items-center gap-1.5">
                            <button onclick="toggleLassoMode()" id="btn-lasso" class="h-7 px-2.5 rounded text-[9px] font-bold bg-white text-[#1e293b] hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0]" title="Ù‚Øµ Ø°ÙƒÙŠ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯">
                                <i class="fas fa-cut"></i> Ù‚Øµ
                            </button>
                            <button onclick="toggleSmartEraserMode()" id="btn-smart-eraser-top" class="h-7 px-2.5 rounded text-[9px] font-bold bg-white text-[#1e293b] hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0]" title="Ù…Ù…Ø­Ø§Ø© Ø°ÙƒÙŠØ© Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯">
                                <i class="fas fa-eraser"></i> Ù…Ù…Ø­Ø§Ø©
                            </button>
                            <button onclick="toggleSmartFillMode()" id="btn-smart-fill" class="h-7 px-2.5 rounded text-[9px] font-bold bg-white text-[#1e293b] hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0]" title="ØªÙ„ÙˆÙŠÙ† Ø°ÙƒÙŠ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯">
                                <i class="fas fa-fill-drip"></i> ØªÙ„ÙˆÙŠÙ†
                            </button>
                            <input type="color" id="smart-fill-picker" value="#6366f1" onchange="setSmartFillColor(this.value)" class="w-6 h-6 rounded cursor-pointer border border-[#e2e8f0]" title="Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„ØªØ¹Ø¨Ø¦Ø©">
                        </div>
                    </div>
                    
                    <!-- Ù‚Ø³Ù… Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­Ø±ÙŠØ± - EDIT TOOLS -->
                    <div class="flex flex-col items-center gap-1 bg-[#000000]/5 px-3 py-1.5 rounded-xl border border-[#6366f1]/20 min-h-[52px] relative">
                        <span class="text-[8px] font-extrabold tracking-[0.2em] text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 w-full text-center">
                            EDIT TOOLS
                        </span>
                        <div class="flex items-center gap-1.5">
                           <button onclick="toggleGradient()" id="btn-grad" class="h-9 px-3 rounded-lg text-[10px] font-bold bg-white/80 dark:bg-slate-600 text-[#374151] dark:text-slate-200 hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0] dark:border-slate-500">
                                <i class="fas fa-adjust text-sm"></i> Ø§Ù„ØªØ¯Ø±Ø¬
                            </button>
                            <button onclick="event.stopPropagation(); toggleEraserMode()" id="btn-eraser" class="h-9 px-3 rounded-lg text-[10px] font-bold bg-white/80 dark:bg-slate-600 text-[#374151] dark:text-slate-200 hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0] dark:border-slate-500">
                                <i class="fas fa-eraser text-sm"></i> Ø§Ù„Ù…Ù…Ø­Ø§Ø©
                            </button>
                            <button onclick="toggleCropMode()" id="btn-crop" class="h-9 px-3 rounded-lg text-[10px] font-bold bg-white/80 dark:bg-slate-600 text-[#374151] dark:text-slate-200 hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0] dark:border-slate-500" title="Ù‚Øµ Ø§Ù„ØµÙˆØ±Ø©">
                                <i class="fas fa-crop text-sm"></i> Crop
                            </button>
                            <button onclick="toggleHandMode()" id="btn-hand" class="h-9 px-3 rounded-lg text-[10px] font-bold bg-white/80 dark:bg-slate-600 text-[#374151] dark:text-slate-200 hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0] dark:border-slate-500" title="Ø£Ø¯Ø§Ø© Ø§Ù„ÙŠØ¯">
                                <i class="fa-regular fa-hand text-sm"></i> ØªØ­Ø±ÙŠÙƒ
                            </button>
                        </div>
                    </div>

                    <!-- Ù‚Ø³Ù… Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ - BUSINESS TOOLS -->
                    <div class="flex flex-col items-center gap-1 bg-[#000000]/5 px-3 py-1.5 rounded-xl border border-[#6366f1]/20 min-h-[52px] relative">
                        <span class="text-[8px] font-extrabold tracking-[0.2em] text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 w-full text-center">
                            BUSINESS TOOLS
                        </span>
                        <div class="flex items-center gap-1.5">
                            <button onclick="openQRModal()" id="btn-qr" class="h-9 px-3 rounded-lg text-[10px] font-bold bg-white/80 dark:bg-slate-600 text-[#374151] dark:text-slate-200 hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0] dark:border-slate-500" title="ØªÙˆÙ„ÙŠØ¯ QR Code">
                                <i class="fas fa-qrcode text-sm"></i> Ø¨Ø§Ø±ÙƒÙˆØ¯
                            </button>
                            <button onclick="openSocialModal()" id="btn-social" class="h-9 px-3 rounded-lg text-[10px] font-bold bg-white/80 dark:bg-slate-600 text-[#374151] dark:text-slate-200 hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0] dark:border-slate-500">
                                <div class="flex gap-1">
                                    <i class="fab fa-instagram text-xs"></i>
                                    <i class="fab fa-tiktok text-xs"></i>
                                </div>
                                Social
                            </button>
                            <button onclick="openDiscountModal()" id="btn-discount" class="h-9 px-3 rounded-lg text-[10px] font-bold bg-white/80 dark:bg-slate-600 text-[#374151] dark:text-slate-200 hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5 border border-[#e2e8f0] dark:border-slate-500" title="ØµØ§Ù†Ø¹ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª">
                                <i class="fas fa-tags text-sm"></i> Ø®ØµÙˆÙ…Ø§Øª
                            </button>
                        </div>
                    </div>
                    
                    <!-- Universal File Input: Supports All Formats -->
                    <input type="file" onchange="handleUniversalFile(this)" class="hidden" accept=".tif,.tiff,.pdf,.psd,.ai,.eps,.svg,.png,.jpg,.jpeg,.webp,.bmp">
                </div>
                
                <!-- Ù„ÙˆØ­Ø§Øª Ø§Ù„ØªØ­ÙƒÙ… -->
                
                <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù…Ø­Ø§Ø© - ØªØ¸Ù‡Ø± ÙÙˆÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† -->
                <div id="eraser-controls" class="controls-row bg-[#f8fafc] px-2 py-1.5 rounded-lg border border-[#6366f1]/30 mb-2" style="order: 1 !important;">
                    <div class="flex items-center gap-1 pl-2">
                        <label class="flex items-center gap-1 cursor-pointer">
                            <input type="checkbox" id="eraser-protect-bg" checked class="w-3 h-3 accent-[#6366f1]">
                            <span class="text-[9px] font-bold text-[#1e293b]">Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø®Ù„ÙÙŠØ©</span>
                        </label>
                    </div>
                    
                    <div class="flex items-center gap-1">
                         <span class="text-[9px] font-bold text-[#1e293b]">Ø­Ø¬Ù…:</span>
                         <input type="range" min="5" max="100" value="30" id="eraser-size" class="w-12 h-1 accent-[#6366f1] cursor-pointer">
                         <span id="eraser-size-display" class="text-[9px] font-bold w-4">30</span>
                    </div>

                    <div class="flex items-center gap-1">
                        <span class="text-[9px] font-bold text-[#1e293b]">Ù†Ø¹ÙˆÙ…Ø©:</span>
                        <input type="range" min="0" max="50" value="0" id="eraser-softness" class="w-12 h-1 accent-[#6366f1] cursor-pointer">
                        <span id="eraser-softness-display" class="text-[9px] font-bold w-4">0</span>
                    </div>
                    
                    <div class="w-px h-4 bg-[#6366f1] mx-1"></div>
                    <button id="btn-magic" onclick="toggleMagicMode()" class="h-7 px-2.5 rounded text-[9px] font-bold bg-white border border-[#e2e8f0] text-[#1e293b] hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5" title="Ù…Ù…Ø­Ø§Ø© Ø³Ø­Ø±ÙŠØ©">
                        <i class="fas fa-magic"></i> Ø§Ù„Ø³Ø­Ø±ÙŠØ©
                    </button>
                    <button id="btn-smart-eraser" onclick="event.stopPropagation(); toggleSmartEraserMode()" class="h-7 px-2.5 rounded text-[9px] font-bold bg-white border border-[#e2e8f0] text-[#1e293b] hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1.5" title="Ù…Ù…Ø­Ø§Ø© Ø°ÙƒÙŠØ© Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯">
                        <i class="fas fa-draw-polygon"></i> Ø§Ù„Ø°ÙƒÙŠØ©
                    </button>
                    
                    <div id="magic-tolerance-control" class="hidden items-center gap-1">
                         <span class="text-[9px] font-bold text-[#6366f1]">Ø¯Ù‚Ø©:</span>
                         <input type="range" min="1" max="100" value="30" id="magic-tolerance" class="w-10 h-1 accent-[#6366f1] cursor-pointer">
                         <span id="magic-tolerance-display" class="text-[9px] font-bold w-4">30</span>
                    </div>

                    <div class="w-px h-4 bg-[#6366f1] mx-1"></div>
                    <button onclick="exitEraserMode()" class="h-7 px-2.5 rounded text-[9px] font-bold bg-slate-300 text-slate-700 hover:bg-slate-400 transition">Ø¥Ù†Ù‡Ø§Ø¡</button>
                </div>

                <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ¯Ø±Ø¬ -->
                <div id="grad-controls" class="controls-row bg-[#f8fafc] px-2 py-1.5 rounded-lg border border-[#e2e8f0] mb-2">
                    <!-- Global Overlay Controls -->
                    <div id="global-grad-inputs" class="flex items-center gap-2">
                        <span class="text-[9px] font-bold text-[#1e293b]">ØªØ¯Ø±Ø¬:</span>
                        <input type="color" id="global-grad-start" value="#000000" oninput="updateGlobalGradient()" class="w-5 h-5 rounded cursor-pointer border-none bg-transparent" title="Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ¯Ø±Ø¬ (Ø£Ø³ÙÙ„)">
                        <input type="color" id="global-grad-end" value="#ffffff" oninput="updateGlobalGradient()" class="w-5 h-5 rounded cursor-pointer border-none bg-transparent" title="Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¯Ø±Ø¬ (Ø£Ø¹Ù„Ù‰)">
                        
                        <div class="w-px h-4 bg-[#6366f1] mx-1"></div>
                        <input type="range" min="0" max="1" step="0.1" value="0.8" oninput="updateGlobalGradient()" id="global-grad-opacity" class="w-16 h-1.5 accent-[#6366f1] cursor-pointer" title="Ø§Ù„Ø´ÙØ§ÙÙŠØ©">
                        <div class="w-px h-4 bg-[#6366f1] mx-1"></div>
                        <span class="text-[9px] font-bold text-[#1e293b]">Ø§Ù„ØªÙ…Ø¯Ø¯:</span>
                        <input type="range" min="10" max="100" value="50" oninput="updateGlobalGradient()" id="global-grad-height" class="w-16 h-1.5 accent-[#6366f1] cursor-pointer" title="Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ØªØ¯Ø±Ø¬">
                    </div>

                    <!-- Element Gradient Controls -->
                    <div id="element-grad-inputs" class="hidden items-center gap-2">
                        <span class="text-[9px] font-bold text-[#1e293b]">Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</span>
                        <input type="color" id="grad-start-color" value="#6366f1" oninput="syncFloatGradientInputs('start', this.value); updateElementGradient()" class="w-5 h-5 rounded cursor-pointer border-none bg-transparent">
                        
                        <span class="text-[9px] font-bold text-[#1e293b]">Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:</span>
                        <input type="color" id="grad-end-color" value="#ec4899" oninput="syncFloatGradientInputs('end', this.value); updateElementGradient()" class="w-5 h-5 rounded cursor-pointer border-none bg-transparent">
                        
                        <div class="w-px h-4 bg-[#6366f1] mx-1"></div>
                        
                        <span class="text-[9px] font-bold text-[#1e293b]">Ø§Ù„Ø²Ø§ÙˆÙŠØ©:</span>
                        <input type="range" min="0" max="360" value="90" id="grad-angle" oninput="syncFloatGradientInputs('angle', this.value); updateElementGradient()" class="w-16 h-1.5 accent-[#6366f1] cursor-pointer" title="Ø²Ø§ÙˆÙŠØ© Ø§Ù„ØªØ¯Ø±Ø¬">

                        <div class="w-px h-4 bg-[#6366f1] mx-1"></div>

                        <span class="text-[9px] font-bold text-[#1e293b]">Ø§Ù„Ø´ÙØ§ÙÙŠØ©:</span>
                        <input type="range" min="0" max="1" step="0.1" value="1" id="grad-opacity" oninput="updateElementGradient()" class="w-16 h-1.5 accent-[#6366f1] cursor-pointer" title="Ø´ÙØ§ÙÙŠØ© Ø§Ù„ØªØ¯Ø±Ø¬">
                        
                        <div class="w-px h-4 bg-[#6366f1] mx-1"></div>
                        <button onclick="toggleGradient()" class="px-2 py-0.5 bg-red-500 text-white rounded text-[9px] font-bold hover:bg-red-600 transition" title="Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ¯Ø±Ø¬">
                            <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                        </button>
                    </div>
                </div>

                <!-- Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø© -->
                <div id="fav-colors-row" class="bg-[#f8fafc] px-2 py-1.5 rounded-lg border border-[#e2e8f0] flex items-center gap-2 overflow-x-auto mb-2" style="order: 2;">
                    <span class="text-[9px] font-bold text-[#1e293b] whitespace-nowrap">Ù…ÙØ¶Ù„Ø©:</span>
                    <div id="fav-colors-container" class="flex items-center gap-1.5 flex-wrap">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JS -->
                    </div>
                    <div class="w-px h-4 bg-[#e2e8f0] mx-1"></div>
                    <div class="relative" title="Ø¥Ø¶Ø§ÙØ© Ù„ÙˆÙ† Ø¬Ø¯ÙŠØ¯">
                        <label for="add-fav-color" class="w-5 h-5 rounded-full bg-white border border-dashed border-gray-400 flex items-center justify-center cursor-pointer hover:border-[#6366f1] text-gray-400 hover:text-[#6366f1] transition shadow-sm">
                            <i class="fas fa-plus text-[8px]"></i>
                        </label>
                        <input type="color" id="add-fav-color" class="absolute opacity-0 w-0 h-0" onchange="addFavoriteColor(this.value)">
                    </div>

                    <!-- Ø®ØµØ§Ø¦Øµ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø­Ø¯Ø¯ (Ø´ÙØ§ÙÙŠØ© Ø§Ù„ØµÙˆØ±Ø©) -->
                    <div id="quick-props" class="hidden flex items-center gap-1 border-r border-[#e2e8f0] pr-2 mr-2">
                        <span class="text-[9px] text-[#1e293b] font-bold whitespace-nowrap">Ø´ÙØ§ÙÙŠØ©:</span>
                        <input type="range" id="layer-opacity" min="0" max="100" value="100" oninput="updateLayerOpacity(this.value)" class="w-16 h-1.5 bg-[#e2e8f0] rounded-lg accent-[#6366f1] cursor-pointer">
                        <span id="opacity-value" class="text-[9px] font-bold text-[#6366f1] w-6">100%</span>
                        
                        <!-- Ø¹Ù†Ø§ØµØ± Ù…Ø®ÙÙŠØ© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ -->
                        <span id="text-color-section" class="hidden">
                             <input type="color" id="quick-color" oninput="updateStyle('color', this.value)" class="w-5 h-5 rounded cursor-pointer border border-[#cbd5e1]">
                        </span>
                    </div>

                    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø·Ø§Ø± (ØªÙ… Ù†Ù‚Ù„Ù‡Ø§ Ù‡Ù†Ø§) -->
                    <div id="frame-controls-toolbar" class="hidden flex items-center gap-1 border-r border-[#e2e8f0] pr-2 mr-2">
                        <span class="text-[9px] font-bold text-[#1e293b]">Ù„ÙˆÙ† Ø§Ù„Ø­Ø¯:</span>
                        <input type="color" id="border-color" oninput="updateStyle('borderColor', this.value)" class="w-5 h-5 rounded cursor-pointer border border-[#cbd5e1]">
                        <div class="w-px h-4 bg-[#cbd5e1] mx-1"></div>
                        <span class="text-[9px] font-bold text-[#1e293b]">Ø³Ù…Ùƒ:</span>
                        <input type="range" id="border-width" min="0" max="20" value="1" oninput="updateStyle('borderWidth', this.value + 'px')" class="w-16 h-1.5 bg-[#e2e8f0] rounded-lg accent-[#6366f1]">
                        <div class="w-px h-4 bg-[#cbd5e1] mx-1"></div>
                        <span class="text-[9px] font-bold text-[#1e293b]">Ù„ÙˆÙ†:</span>
                        <input type="color" id="bg-color" oninput="updateStyle('backgroundColor', this.value)" class="w-5 h-5 rounded cursor-pointer border border-[#cbd5e1]">
                    </div>
                </div>

                <!-- ØªÙ… Ù†Ù‚Ù„ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø£Ø·Ø± Ø¥Ù„Ù‰ Ù†Ø§ÙØ°Ø© Ø¹Ø§Ø¦Ù…Ø© -->

            </div>

            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù‚Ø§Ø¨Ù„ Ù„Ù„ÙØªØ­) -->
            <div id="info-bar-placeholder" class="bg-[#f1f5f9] dark-mode:bg-[#1a1a2e] p-3 rounded text-[11px] text-[#1e293b] dark-mode:text-[#e8e8e8] border border-[#e2e8f0] dark-mode:border-[#2a2a3e] flex items-center gap-2 font-bold cursor-pointer hover:bg-[#e8f0fe] dark-mode:hover:bg-[#252545] transition" onclick="openDesignerPanel()">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-notebook" style="flex-shrink: 0; color: #6366f1;"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18" /><path d="M13 8l2 0" /><path d="M13 12l2 0" /></svg> <span>Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ - write your notes</span>
            </div>

            <!-- Ù†Ø§ÙØ°Ø© Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØµÙ…Ù… (Collapsible Designer Panel) -->
        <!-- Ù†Ø§ÙØ°Ø© Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØµÙ…Ù… (Tiny Toast Style) -->
        <!-- Ù†Ø§ÙØ°Ø© Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØµÙ…Ù… (Toast Style - Expanded) -->
        <div id="designer-panel" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md" onclick="if(event.target.id === 'designer-panel') closeDesignerPanel()">
            <div class="relative w-[400px] rounded-[2.2rem] overflow-hidden shadow-[0_20px_50px_-12px_rgba(0,0,0,0.3)] transform transition-all duration-300 scale-100" 
                 onclick="event.stopPropagation()"
                 style="background: white; border: 1px solid rgba(243, 244, 246, 1);">
                 
                <!-- Ø²ÙŠÙ†Ø© Ø®Ù„ÙÙŠØ© -->
                <div class="absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-indigo-100/40 to-purple-100/40 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none"></div>
                <div class="absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-pink-100/30 to-rose-100/30 rounded-full blur-2xl -ml-16 -mb-16 pointer-events-none"></div>

                <!-- Header -->
                <div class="px-5 pt-5 pb-3 flex items-center justify-between relative z-10 border-b border-gray-100">
                    <div class="flex items-center gap-3">
                        <div class="w-11 h-11 rounded-2xl flex items-center justify-center shadow-lg ring-1 ring-white/50" 
                             style="background: linear-gradient(135deg, #6366f1, #8b5cf6);">
                            <i class="fas fa-palette text-white text-lg"></i>
                        </div>
                        <div>
                            <h2 class="text-slate-800 font-bold text-base tracking-tight">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØµÙ…Ù…</h2>
                            <p class="text-slate-400 text-[10px] font-medium">Ù…Ø³Ø§Ø­ØªÙƒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ø§Ù„Ø®Ø§ØµØ© âœ¨</p>
                        </div>
                    </div>
                    <button onclick="closeDesignerPanel()" class="w-8 h-8 rounded-xl bg-slate-100 hover:bg-red-50 flex items-center justify-center transition text-slate-400 hover:text-red-500 hover:rotate-90">
                        <i class="fas fa-times text-sm"></i>
                    </button>
                </div>

                <!-- Content -->
                <div class="p-5 space-y-4 relative z-10">
                    <!-- Notes (Yellow Box - Big & Square) -->
                    <div class="bg-[#fef3c7] p-4 rounded-xl shadow-sm border-l-4 border-[#f59e0b] group relative">
                        <!-- Header for Notes -->
                        <h3 class="font-bold text-[#92400e] mb-3 flex items-center justify-between text-xs relative z-10">
                            <span class="flex items-center gap-2">
                                <i class="fas fa-sticky-note text-[#f59e0b]"></i> Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ…
                            </span>
                            <span class="text-[10px] bg-[#f59e0b] text-white px-2 py-0.5 rounded-full shadow-sm" id="char-count">0/140</span>
                        </h3>
                        
                        <!-- Big Area -->
                        <textarea 
                            id="designer-notes" 
                            class="w-full h-20 p-3 bg-white/60 border border-[#f59e0b]/10 rounded-lg text-[#78350f] text-xs resize-none focus:outline-none focus:bg-white/90 focus:border-[#f59e0b]/30 transition-all placeholder:text-[#92400e]/50 leading-relaxed"
                            placeholder="Ù‡Ù†Ø§ Ù…Ø³Ø§Ø­ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©.. Ø¯ÙˆÙ‘Ù† Ø£ÙÙƒØ§Ø±ÙƒØŒ ØªØ¹Ù„ÙŠÙ‚Ø§ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ…ÙŠÙ…ØŒ Ø£Ùˆ Ø£ÙŠ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© ØªØ®Ø·Ø± Ø¨Ø¨Ø§Ù„Ùƒ Ù„ØªØ°ÙƒØ±Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹"
                            maxlength="140"
                            onchange="updateDesignerNotes()"
                            oninput="updateCharCount()"
                        style="background-image: repeating-linear-gradient(to bottom, transparent, transparent 19px, #f59e0b15 19px, #f59e0b15 20px); background-size: 100% 20px; padding-top: 4px;"
                        ></textarea>
                        
                        <!-- Premium Promo - ÙŠÙØ®ÙÙ‰ Ù„Ù„Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… Ø¹Ø¨Ø± JS -->
                        <div id="premium-notes-promo" class="flex justify-between items-center mt-3 pt-2 border-t border-[#f59e0b]/10">
                            <span class="text-[9px] text-[#92400e]/60">Ù†Ø³Ø®Ø© Ù…Ø¬Ø§Ù†ÙŠØ©: 140 Ø­Ø±Ù ÙÙ‚Ø·</span>
                            <div class="flex items-center gap-1.5 cursor-pointer group/promo" onclick="showPremiumModal('Ø²ÙŠØ§Ø¯Ø© Ø­Ø¯ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª')">
                                <i class="fas fa-crown text-[10px] text-yellow-500 group-hover/promo:scale-110 transition-transform"></i>
                                <span class="text-[10px] font-bold text-yellow-600 group-hover/promo:text-yellow-700 transition-colors">ØªØ±Ù‚ÙŠØ© Ù„Ù€ 1000 ÙƒÙ„Ù…Ø©</span>
                            </div>
                        </div>
                    </div>

                    <!-- Statistics (Light Mode) -->
                    <div class="bg-gradient-to-br from-slate-50 to-slate-100/80 p-4 rounded-xl border border-slate-200/60 shadow-sm">
                        <h3 class="font-bold text-slate-700 mb-3 flex items-center gap-2 text-xs">
                            <i class="fas fa-chart-pie text-indigo-500"></i> Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                        </h3>
                        
                        <div class="grid grid-cols-2 gap-3 mb-3">
                            <div class="flex flex-col items-center bg-white p-2.5 rounded-lg border border-slate-200/60 shadow-sm">
                                <span class="text-slate-500 text-[10px] mb-1">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±</span>
                                <p class="font-bold text-slate-800 text-sm" id="element-count">0</p>
                            </div>
                            <div class="flex flex-col items-center bg-white p-2.5 rounded-lg border border-slate-200/60 shadow-sm">
                                <span class="text-slate-500 text-[10px] mb-1">Ø­Ø¬Ù… Ø§Ù„ØªØµÙ…ÙŠÙ…</span>
                                <p class="font-mono font-bold text-slate-800 text-[11px] mt-1" id="canvas-size" dir="ltr">-</p>
                            </div>
                        </div>
                        
                         <!-- Colors (No Border) -->
                         <div class="pt-3 border-t border-slate-200/60">
                            <span class="text-slate-500 text-[10px] font-bold block mb-2">Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:</span>
                            <div id="used-colors-palette" class="flex flex-wrap gap-2 min-h-[20px]">
                                <!-- Colors injected here -->
                            </div>
                        </div>
                    </div>

                    <!-- Close Button Bottom -->
                    <button onclick="closeDesignerPanel()" class="w-full py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white text-xs font-bold rounded-xl transition-all shadow-lg shadow-indigo-200 active:scale-95 flex items-center justify-center gap-2">
                        <i class="fas fa-check"></i> Ø¥ØºÙ„Ø§Ù‚
                    </button>
                </div>
            </div>
        </div>
            <div class="preview-area" onclick="deselect(event)">
                <div id="card-wrapper">
                    <div id="ruler-h" class="ruler ruler-h"></div>
                    <div id="ruler-v" class="ruler ruler-v"></div>
                    <div id="card" onmousedown="deselectOnCard(event)" ontouchstart="handleCardTouch(event)">
                        <div id="card-gradient"></div>
                        <!-- Ø®Ø·ÙˆØ· Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯ Ù„Ù„Ù…Ù†ØªØµÙ -->
                        <div id="guide-center-h" class="guide-line guide-h"></div>
                        <div id="guide-center-v" class="guide-line guide-v"></div>
                    </div>
                    <!-- Crop Overlay -->
                    <div id="crop-overlay" class="hidden absolute top-0 left-0 w-full h-full pointer-events-auto z-[50000]" style="background: rgba(0, 0, 0, 0.5);">
                        <!-- Crop Area (draggable and resizable) -->
                        <div id="crop-area" class="absolute border-2 border-yellow-400" style="box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5), inset 0 0 0 1000px rgba(0, 0, 0, 0); cursor: move; background-color: transparent;">
                            <!-- Top-left corner handle -->
                            <div id="crop-handle-tl" class="absolute w-3 h-3 bg-yellow-400 border border-white cursor-nwse-resize" style="top: -6px; left: -6px;"></div>
                            <!-- Top-right corner handle -->
                            <div id="crop-handle-tr" class="absolute w-3 h-3 bg-yellow-400 border border-white cursor-nesw-resize" style="top: -6px; right: -6px;"></div>
                            <!-- Bottom-left corner handle -->
                            <div id="crop-handle-bl" class="absolute w-3 h-3 bg-yellow-400 border border-white cursor-nesw-resize" style="bottom: -6px; left: -6px;"></div>
                            <!-- Bottom-right corner handle -->
                            <div id="crop-handle-br" class="absolute w-3 h-3 bg-yellow-400 border border-white cursor-nwse-resize" style="bottom: -6px; right: -6px;"></div>
                            <!-- Top edge handle -->
                            <div id="crop-handle-t" class="absolute w-6 h-2 bg-yellow-400 border border-white cursor-ns-resize" style="top: -5px; left: 50%; transform: translateX(-50%);"></div>
                            <!-- Bottom edge handle -->
                            <div id="crop-handle-b" class="absolute w-6 h-2 bg-yellow-400 border border-white cursor-ns-resize" style="bottom: -5px; left: 50%; transform: translateX(-50%);"></div>
                            <!-- Left edge handle -->
                            <div id="crop-handle-l" class="absolute w-2 h-6 bg-yellow-400 border border-white cursor-ew-resize" style="left: -5px; top: 50%; transform: translateY(-50%);"></div>
                            <!-- Right edge handle -->
                            <div id="crop-handle-r" class="absolute w-2 h-6 bg-yellow-400 border border-white cursor-ew-resize" style="right: -5px; top: 50%; transform: translateY(-50%);"></div>
                        </div>
                        <!-- Crop Buttons -->
                        <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex gap-2 z-[50001]">
                            <button onclick="applyCrop()" class="px-4 py-2 bg-green-500 text-white rounded font-bold text-sm hover:bg-green-600 transition">âœ“ ØªØ·Ø¨ÙŠÙ‚</button>
                            <button onclick="exitCropMode()" class="px-4 py-2 bg-red-500 text-white rounded font-bold text-sm hover:bg-red-600 transition">âœ• Ø¥Ù„ØºØ§Ø¡</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙˆØªØ± -->

    <!-- Ù†Ø§ÙØ°Ø© Ø£Ø¯ÙˆØ§Øª Ø¹Ø§Ø¦Ù…Ø© (Ø¨Ø¯ÙŠÙ„Ø© Ø¹Ù† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„Ù…Ù†Ø¹ Ø¥Ø²Ø§Ø­Ø© Ø§Ù„ØªØµÙ…ÙŠÙ…) -->
    <div id="floating-context-toolbar" class="hidden fixed top-[18%] left-1/2 transform -translate-x-1/2 z-[99999] bg-white/95 backdrop-blur shadow-2xl rounded-2xl border border-indigo-100 p-2 flex flex-col gap-2 transition-all duration-300 pointer-events-auto min-w-[280px] max-h-[80vh] overflow-y-auto" style="box-shadow: 0 4px 16px -4px rgba(0,0,0,0.10);">
        
        <!-- Header with Close Button (Draggable Handle) -->
        <div id="floating-toolbar-header" class="flex justify-between items-center px-1 mb-1 border-b border-gray-100 pb-1 cursor-move select-none sticky top-0 bg-white/95" title="Ø§Ø¶ØºØ· ÙˆØ§Ø³Ø­Ø¨ Ù„Ù„ØªØ­Ø±ÙŠÙƒ">
            <span class="text-[10px] text-gray-400 font-bold pointer-events-none">Ø®ØµØ§Ø¦Øµ Ø§Ù„Ø¹Ù†ØµØ±</span>
            <button onclick="closeFloatingToolbar()" class="text-red-500 hover:text-red-700 w-5 h-5 flex items-center justify-center rounded-full hover:bg-red-50 transition" title="Ø¥ØºÙ„Ø§Ù‚">
                <i class="fas fa-times text-[12px]"></i>
            </button>
        </div>

        <!-- Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„: Ø²Ø± Ø§Ù„ØªØ¯Ø±Ø¬ + Ù„ÙˆÙ† Ø§Ù„Ù†Øµ + Ø­Ø¬Ù… Ø§Ù„Ø®Ø· -->
        <div id="gradient-toggle-row" class="hidden controls-row px-2 py-1 rounded items-center gap-2 justify-start flex-wrap">
            <button id="btn-toggle-gradient" onclick="toggleGradientMode()" class="px-2 py-1 rounded text-[9px] font-bold bg-[#f8fafc] text-[#334155] hover:bg-[#6366f1] hover:text-white transition flex items-center gap-1 border border-[#e2e8f0] shadow-sm">
                <i class="fas fa-fill-drip text-[8px]"></i> ØªØ¯Ø±Ø¬
            </button>
            <button id="btn-edit-text" onclick="window.toggleTextEditor()" class="px-2 py-1 rounded text-[9px] font-bold bg-[#6366f1] text-white hover:bg-[#4f46e5] transition flex items-center gap-1 border border-[#4f46e5] shadow-sm">
                <i class="fas fa-edit text-[9px]"></i> ØªØ­Ø±ÙŠØ± Ø§Ù„Ù†Øµ
            </button>
            <div class="w-px h-4 bg-[#e2e8f0]"></div>
            
            <!-- Partial Color Hint Tooltip Wrapper -->
            <div class="relative group flex items-center gap-1">
                <span class="text-[9px] font-bold text-[#1e293b] whitespace-nowrap">Ø§Ù„Ù„ÙˆÙ†:</span>
                <input type="color" id="top-text-color" value="#1e293b" onchange="applyTextColor(this.value)" oninput="applyTextColor(this.value)" class="w-5 h-5 rounded cursor-pointer border border-[#cbd5e1] bg-transparent" title="Ù„ÙˆÙ† Ø§Ù„Ù†Øµ (Ø­Ø¯Ø¯ Ø¬Ø²Ø¡ Ù„ØªÙ„ÙˆÙŠÙ†Ù‡)">
                <!-- Tooltip -->
                <span class="opacity-0 group-hover:opacity-100 transition-opacity absolute -top-8 left-1/2 transform -translate-x-1/2 bg-black text-white text-[8px] px-2 py-1 rounded pointer-events-none whitespace-nowrap z-50">Ø¸Ù„Ù„ Ù†ØµØ§Ù‹ Ù„ØªÙ„ÙˆÙŠÙ†Ù‡ Ù…Ù†ÙØ±Ø¯Ø§Ù‹</span>
            </div>

            <div class="w-px h-4 bg-[#e2e8f0]"></div>
            <span class="text-[9px] font-bold text-[#1e293b] whitespace-nowrap">Ø§Ù„Ø­Ø¬Ù…:</span>
            <input type="range" id="top-font-size" min="10" max="150" value="35" oninput="updateStyle('fontSize', this.value + 'px'); document.getElementById('font-size-input').value = this.value; document.getElementById('top-font-size-input').value = this.value;" class="w-14 h-1.5 accent-[#6366f1]" title="Ø­Ø¬Ù… Ø§Ù„Ø®Ø·">
            <input type="text" inputmode="numeric" id="top-font-size-input" value="35" oninput="this.value = arabicToEnglish(this.value); updateStyle('fontSize', this.value + 'px'); document.getElementById('font-size').value = this.value; document.getElementById('top-font-size').value = this.value;" class="w-10 px-1 py-0.5 border border-[#cbd5e1] rounded text-[10px] font-bold text-[#1e293b] text-center outline-none focus:border-[#6366f1]">
        </div>
        <!-- Ù„ÙˆØ­Ø© ØªØ­Ø±ÙŠØ± Ø§Ù„Ù†Øµ -->
        <div id="text-editor-panel" style="display:none;" class="flex-col gap-1 p-2 bg-slate-50 rounded border border-slate-200 mx-2 mt-1">
            <textarea id="direct-text-editor" class="w-full p-1 border border-slate-300 rounded text-[10px] resize-none" rows="2" dir="rtl" placeholder="Ø§Ù„Ù†Øµ..."></textarea>
            <div class="flex gap-1">
                <button onclick="window.applyTextFromEditor()" class="flex-1 px-2 py-1 bg-indigo-500 text-white text-[11px] font-bold rounded">ØªØ·Ø¨ÙŠÙ‚</button>
                <button onclick="window.closeTextEditor()" class="px-2 py-1 bg-slate-200 text-[11px] font-bold rounded">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>

        <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ù†ÙˆØ¹ Ø§Ù„Ø®Ø· + Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®Ø·ÙˆØ· + Ù†Ø¬Ù…Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© + B + Ø§Ù„Ù…Ø­Ø§Ø°Ø§Ø© -->
        <div id="top-font-controls" class="hidden controls-row px-2 py-1 rounded items-center gap-2 justify-start flex-wrap">
            <span class="text-[9px] font-bold text-[#1e293b] whitespace-nowrap">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·:</span>
            <select id="top-font-family" onchange="handleFontSelection(this)" class="bg-white border border-[#cbd5e1] rounded text-[9px] py-0.5 px-1 font-bold outline-none focus:border-[#6366f1] text-[#1e293b] max-w-[130px]">
                <!-- Ù‚Ø³Ù… Ø§Ù„Ù…ÙØ¶Ù„Ø© (ÙŠÙÙ…Ù„Ø£ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹) -->
                <optgroup id="fav-fonts-group" label="â­ Ø§Ù„Ù…ÙØ¶Ù„Ø©" style="display:none;"></optgroup>
                <!-- Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
                <optgroup label="Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©">
                    <option value="'Cairo', sans-serif">ÙƒØ§ÙŠØ±Ùˆ (Cairo) - Ù…ÙˆØ¯Ø±Ù†</option>
                    <option value="'Tajawal', sans-serif">ØªØ¬ÙˆØ§Ù„ (Tajawal) - Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³</option>
                    <option value="'Almarai', sans-serif">Ø§Ù„Ù…Ø±Ø§Ø¹ÙŠ (Almarai) - Ø±Ø³Ù…ÙŠ</option>
                    <option value="'Zain', sans-serif">Ø²ÙŠÙ† (Zain) - Ø¹ØµØ±ÙŠ</option>
                    <option value="'Mada', sans-serif">Ù…Ø¯Ù‰ (Mada) - Ù†Ø§Ø¹Ù…</option>
                </optgroup>
                <!-- Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø¹ØµØ±ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->
                <optgroup label="Ø®Ø·ÙˆØ· Ø¹ØµØ±ÙŠØ©">
                    <option value="'Rubik', sans-serif">Ø±ÙˆØ¨ÙŠÙƒ (Rubik) - ØªØ·Ø¨ÙŠÙ‚Ø§Øª</option>
                    <option value="'Readex Pro', sans-serif">Ø±ÙŠØ¯ÙƒØ³ (Readex Pro) - ÙˆØ§Ø¶Ø­</option>
                    <option value="'Alexandria', sans-serif">Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© (Alexandria) - Ø£Ù†ÙŠÙ‚</option>
                    <option value="'Noto Sans Arabic', sans-serif">Ù†ÙˆØªÙˆ Ø³Ø§Ù†Ø³ (Noto Sans) - Ø­Ø¯ÙŠØ«</option>
                    <option value="'Noto Kufi Arabic', sans-serif">Ù†ÙˆØªÙˆ ÙƒÙˆÙÙŠ (Noto Kufi) - ÙƒÙˆÙÙŠ Ø­Ø¯ÙŠØ«</option>
                    <option value="'Akatab', sans-serif">Ø£ÙƒØªØ¨ (Akatab) - Ø¨Ø³ÙŠØ·</option>
                    <option value="'Harmattan', sans-serif">Ù‡Ø±Ù…ØªØ§Ù† (Harmattan) - Ù†Ø§Ø¹Ù…</option>
                    <option value="'Mirza', sans-serif">Ù…ÙŠØ±Ø²Ø§ (Mirza) - ÙÙ†ÙŠ</option>
                </optgroup>
                <!-- Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„ÙÙ†ÙŠØ© ÙˆØ§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© -->
                <optgroup label="Ø®Ø·ÙˆØ· ÙÙ†ÙŠØ©">
                    <option value="'Blaka', cursive">Ø¨Ù„Ø§ÙƒØ§ (Blaka) - Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ</option>
                    <option value="'Blaka Ink', cursive">Ø¨Ù„Ø§ÙƒØ§ Ø­Ø¨Ø± (Blaka Ink) - Ø­Ø¨Ø±ÙŠ</option>
                    <option value="'Blaka Hollow', cursive">Ø¨Ù„Ø§ÙƒØ§ Ù…ÙØ±Øº (Blaka Hollow) - Ù…ÙØ±Øº</option>
                    <option value="'Marhey', cursive">Ù…Ø±Ø­ÙŠ (Marhey) - ÙŠØ¯ÙˆÙŠ</option>
                    <option value="'Katibeh', serif">ÙƒØ§ØªØ¨Ø© (Katibeh) - Ù…Ø²Ø®Ø±Ù</option>
                    <option value="'Rakkas', serif">Ø±Ù‚Ø§Øµ (Rakkas) - ÙÙ†ÙŠ</option>
                    <option value="'Lalezar', cursive">Ù„Ø§Ù„ÙŠØ²Ø§Ø± (Lalezar) - Ø¹Ø±ÙŠØ¶</option>
                </optgroup>
                <!-- Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ© -->
                <optgroup label="Ø®Ø·ÙˆØ· ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©">
                    <option value="'Noto Serif Arabic', serif">Ù†ÙˆØªÙˆ Ø³ÙŠØ±ÙŠÙ (Noto Serif) - Ø³ÙŠØ±ÙŠÙ</option>
                    <option value="'Amiri', serif">Ø£Ù…ÙŠØ±ÙŠ (Amiri) - Ù†Ø³Ø®</option>
                    <option value="'Aref Ruqaa', serif">Ø¹Ø§Ø±Ù (Aref Ruqaa) - Ø±Ù‚Ø¹Ø©</option>
                    <option value="'Scheherazade New', serif">Ø´Ù‡Ø±Ø²Ø§Ø¯ (Scheherazade) - ØªØ±Ø§Ø«ÙŠ</option>
                    <option value="'Lateef', serif">Ù„Ø·ÙŠÙ (Lateef) - ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ</option>
                    <option value="'Gulzar', serif">Ø¬Ù„Ø²Ø§Ø± (Gulzar) - Ù†Ø³ØªØ¹Ù„ÙŠÙ‚</option>
                    <option value="'Markazi Text', serif">Ù…Ø±ÙƒØ²ÙŠ (Markazi) - Ø¹Ù†Ø§ÙˆÙŠÙ†</option>
                </optgroup>
                <!-- Ø®Ø·ÙˆØ· Ù…ØªÙ†ÙˆØ¹Ø© -->
                <optgroup label="Ø®Ø·ÙˆØ· Ù…ØªÙ†ÙˆØ¹Ø©">
                    <option value="'IBM Plex Sans Arabic', sans-serif">Ø¨Ù„ÙƒØ³ (IBM Plex) - ØªÙ‚Ù†ÙŠ</option>
                    <option value="'Vazirmatn', sans-serif">ÙˆØ²ÙŠØ± (Vazirmatn) - Ù†Ø¸ÙŠÙ</option>
                    <option value="'Reem Kufi', sans-serif">Ø±ÙŠÙ… (Reem Kufi) - ÙƒÙˆÙÙŠ</option>
                    <option value="'Kufam', sans-serif">ÙƒÙˆÙÙ… (Kufam) - ÙƒÙˆÙÙŠ Ù…Ø·ÙˆØ±</option>
                    <option value="'El Messiri', sans-serif">Ø§Ù„Ù…Ø³ÙŠØ±ÙŠ (El Messiri) - Ù…Ù…ÙŠØ²</option>
                    <option value="'Changa', sans-serif">Ø´Ø§Ù†Ø¬Ø§ (Changa) - Ù‚ÙˆÙŠ</option>
                    <option value="'Baloo Bhaijaan 2', cursive">Ø¨Ø§Ù„Ùˆ (Baloo) - Ø·ÙÙˆÙ„ÙŠ</option>
                    <option value="'Lemonada', cursive">Ù„ÙŠÙ…ÙˆÙ†Ø§Ø¯Ø© (Lemonada) - Ø¹ÙÙˆÙŠ</option>
                </optgroup>
                <!-- English Modern Fonts -->
                <optgroup label="English Modern Fonts">
                    <option value="'Poppins', sans-serif">Poppins - Modern</option>
                    <option value="'Montserrat', sans-serif">Montserrat - Elegant</option>
                    <option value="'Inter', sans-serif">Inter - Clean</option>
                    <option value="'Raleway', sans-serif">Raleway - Stylish</option>
                    <option value="'Nunito', sans-serif">Nunito - Friendly</option>
                    <option value="'Quicksand', sans-serif">Quicksand - Rounded</option>
                    <option value="'Outfit', sans-serif">Outfit - Geometric</option>
                    <option value="'DM Sans', sans-serif">DM Sans - Professional</option>
                    <option value="'Space Grotesk', sans-serif">Space Grotesk - Techy</option>
                    <option value="'Sora', sans-serif">Sora - Minimal</option>
                    <option value="'Manrope', sans-serif">Manrope - Fresh</option>
                    <option value="'Plus Jakarta Sans', sans-serif">Jakarta Sans - Bold</option>
                    <option value="'Urbanist', sans-serif">Urbanist - Urban</option>
                    <option value="'Lexend', sans-serif">Lexend - Readable</option>
                    <option value="'Figtree', sans-serif">Figtree - Simple</option>
                    <option value="'Work Sans', sans-serif">Work Sans - Classic</option>
                    <option value="'Josefin Sans', sans-serif">Josefin Sans - Vintage</option>
                    <option value="'Comfortaa', cursive">Comfortaa - Smooth</option>
                    <option value="'Righteous', cursive">Righteous - Display</option>
                </optgroup>
                <!-- Ø¥Ø¶Ø§ÙØ© Ø®Ø· Ù…Ø®ØµØµ -->
                <optgroup label="â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€">
                    <option value="__ADD_CUSTOM_FONT__" style="color: #6366f1; font-weight: bold;">â• Ø¥Ø¶Ø§ÙØ© Ø®Ø· Ù…Ø®ØµØµ...</option>
                </optgroup>
            </select>
            <!-- Ø²Ø± Ø§Ù„Ù†Ø¬Ù…Ø© Ù„Ù„Ù…ÙØ¶Ù„Ø© -->
            <button id="btn-fav-font" onclick="toggleFavoriteFont()" class="px-1.5 py-0.5 rounded text-[18px] bg-transparent border-none text-[#cbd5e1] hover:text-[#f59e0b] transition" title="Ø¥Ø¶Ø§ÙØ©/Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©">
                â˜†
            </button>
            <input type="file" id="custom-font-input" accept=".ttf,.otf,.woff,.woff2" style="display:none" onchange="handleCustomFontUpload(this)">
            <!-- Ø²Ø± Ø§Ù„Ø¨ÙˆÙ„Ø¯ -->
            <button id="btn-bold" onclick="toggleBold()" class="px-2 py-0.5 rounded text-[10px] font-bold bg-white border border-[#cbd5e1] text-[#1e293b] hover:bg-[#6366f1] hover:text-white transition" title="Ø®Ø· Ø¹Ø±ÙŠØ¶">
                B
            </button>
            
            <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø­Ø§Ø°Ø§Ø© (ØµØºÙŠØ±Ø© Ø¬Ø§Ù†Ø¨ÙŠØ©) -->
            <div class="flex items-center gap-0.5 bg-white border border-[#cbd5e1] rounded px-1 py-0 overflow-hidden shadow-sm h-[24px]">
                <button onclick="updateStyle('textAlign', 'right')" class="w-6 h-full flex items-center justify-center text-[#64748b] hover:text-[#6366f1] hover:bg-slate-50 transition" title="ÙŠÙ…ÙŠÙ†">
                    <i class="fas fa-align-right text-[10px]"></i>
                </button>
                <div class="w-px h-3 bg-gray-200"></div>
                <button onclick="updateStyle('textAlign', 'center')" class="w-6 h-full flex items-center justify-center text-[#64748b] hover:text-[#6366f1] hover:bg-slate-50 transition" title="ÙˆØ³Ø·">
                    <i class="fas fa-align-center text-[10px]"></i>
                </button>
                <div class="w-px h-3 bg-gray-200"></div>
                <button onclick="updateStyle('textAlign', 'left')" class="w-6 h-full flex items-center justify-center text-[#64748b] hover:text-[#6366f1] hover:bg-slate-50 transition" title="ÙŠØ³Ø§Ø±">
                    <i class="fas fa-align-left text-[10px]"></i>
                </button>
            </div>
        </div>

        <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ¯Ø±Ø¬ (ØªØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„) -->
        <div id="floating-grad-settings" class="hidden flex-col gap-2 p-2 bg-slate-50 rounded border border-slate-200 shadow-inner mx-2">
            <div class="flex items-center gap-1 justify-between">
                <div class="flex items-center gap-1">
                    <span class="text-[9px] font-bold">Ø¨Ø¯Ø¡:</span>
                    <input type="color" id="float-grad-start" value="#6366f1" oninput="syncGradientInputs('start', this.value); updateElementGradient()" class="w-5 h-5 rounded cursor-pointer border-none bg-transparent">
                    <span class="text-[9px] font-bold ml-1">Ù†Ù‡Ø§ÙŠØ©:</span>
                    <input type="color" id="float-grad-end" value="#ec4899" oninput="syncGradientInputs('end', this.value); updateElementGradient()" class="w-5 h-5 rounded cursor-pointer border-none bg-transparent">
                </div>
                <div class="flex items-center gap-1">
                     <span class="text-[9px] font-bold">Ø²Ø§ÙˆÙŠØ©:</span>
                         <input type="range" min="0" max="360" value="90" id="float-grad-angle" oninput="syncGradientInputs('angle', this.value); updateElementGradient()" class="w-10 h-1 accent-[#6366f1]">
                    </div>
                </div>
            </div>
        </div>

        <!-- (ØªÙ… Ø­Ø°Ù Ù„ÙˆØ­Ø© ØªØ­Ø±ÙŠØ± Ø§Ù„Ù†Øµ Ù…Ù† Ù‡Ù†Ø§ Ù„Ù†Ù‚Ù„Ù‡Ø§) -->
    </div>

    <!-- Ø²Ø± Ù„Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙŠØ¯ÙˆÙŠ Ù„Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© - ØªÙ…Øª Ø¥Ø²Ø§Ù„ØªÙ‡ Ù„Ø¯Ù…Ø¬Ù‡ ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© -->
    <div id="close-floating-toolbar" class="hidden"></div>

    <!-- Footer -->
    <footer class="relative bg-gradient-to-r from-[#1e1b4b] to-[#312e81] text-white py-4 mt-auto border-t border-[#4338ca]/50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <!-- Ø§Ù„ØµÙ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
            <div class="flex flex-wrap items-center justify-between gap-4">
                
                <!-- Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰: Ø§Ù„Ø´Ø¹Ø§Ø± -->
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-[#6366f1] rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20">
                        <i class="fas fa-palette text-white text-lg"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-base text-white">Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Despro</h3>
                        <p class="text-[11px] text-white/60">Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØµØºÙŠØ±Ø© ÙˆØ§Ù„Ù…Ù†Ø²Ù„ÙŠØ©</p>
                    </div>
                </div>
                
                <!-- Ø§Ù„ÙˆØ³Ø·: Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
                <div class="flex items-center gap-4 bg-white/5 py-2 px-4 rounded-xl border border-white/5 backdrop-blur-sm">
                    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
                    <div class="flex items-center gap-2">
                        <a href="subscriptions.html" class="text-xs font-bold text-[#fbbf24] hover:text-[#fcd34d] transition flex items-center gap-2 px-3 py-1.5 bg-[#fbbf24]/10 hover:bg-[#fbbf24]/20 rounded-lg border border-[#fbbf24]/20">
                            <i class="fas fa-crown"></i>
                            Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
                        </a>
                        <div class="w-px h-5 bg-white/10"></div>
                        <a href="https://wa.me/966531333714" target="_blank" class="text-xs font-bold text-white/90 hover:text-white transition flex items-center gap-2 px-2 py-1.5">
                            <i class="fas fa-headset text-pink-400"></i>
                            Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ
                        </a>
                    </div>
                    
                    <!-- ÙØ§ØµÙ„ -->
                    <div class="w-px h-8 bg-white/10 mx-1"></div>
                    
                    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ -->
                    <div class="flex items-center gap-2" dir="ltr">
                        <a href="https://wa.me/966531333714" target="_blank" class="w-8 h-8 bg-white/5 hover:bg-white/10 rounded-lg flex items-center justify-center transition border border-white/10 text-white/90 hover:text-white">
                            <i class="fab fa-whatsapp text-lg"></i>
                        </a>
                        <a href="https://x.com/sdr_10" target="_blank" class="w-8 h-8 bg-white/5 hover:bg-white/10 rounded-lg flex items-center justify-center transition border border-white/10 text-white/90 hover:text-white">
                            <i class="fab fa-x-twitter text-lg"></i>
                        </a>
                        <a href="mailto:sloom059@gmail.com" class="w-8 h-8 bg-white/5 hover:bg-white/10 rounded-lg flex items-center justify-center transition border border-white/10 text-white/90 hover:text-white">
                            <i class="fas fa-envelope text-lg"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ÙŠØ³Ø±Ù‰: Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ -->
                <div class="flex flex-col items-center gap-2 bg-[#000000]/20 px-5 py-2 rounded-xl border border-white/5">
                    <span class="text-[10px] font-extrabold tracking-[0.5em] text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-amber-500 font-[sans-serif] w-full text-center">
                        PREMIUM MEMBERS
                    </span>
                    <div id="auth-container">
                        <button id="footer-login-btn" onclick="toggleLoginOverlay()" class="w-full text-xs font-bold text-white transition flex items-center justify-center gap-2 px-6 py-1.5 bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 rounded-lg shadow-lg hover:shadow-violet-500/25 border border-white/10">
                            <i class="fas fa-key text-xs text-white"></i>
                            <span class="text-white">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</span>
                            <span class="text-white/40 font-light mx-0.5">|</span>
                            <span class="font-sans tracking-wide text-[10px] text-white">Login</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Ø§Ù„Ø­Ù‚ÙˆÙ‚ -->
            <div class="border-t border-white/5 mt-4 pt-3 flex flex-col md:flex-row justify-center items-center gap-4 text-[10px]">
                <p class="text-white/40">Â© 2026 Studio Despro - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
                <div class="flex gap-3">
                    <a href="privacy.html" class="text-white/70 hover:text-white transition">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
                    <a href="terms.html" class="text-white/70 hover:text-white transition">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a>
                    <a href="refund.html" class="text-white/70 hover:text-white transition">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Ù†Ø§ÙØ°Ø© QR Code -->
    <!-- Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ -->
    <div id="qrModal" class="fixed inset-0 z-[100002] hidden items-center justify-center bg-black/40 backdrop-blur-md p-4 text-right">
        <div class="bg-white rounded-[2.2rem] p-6 w-full max-w-[380px] shadow-[0_20px_50px_-12px_rgba(0,0,0,0.3)] qr-modal-animate relative border border-gray-100">
            
            <!-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ -->
            <button onclick="this.closest('#qrModal').style.display='none'" class="absolute left-5 top-5 text-gray-300 hover:text-red-500 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18M6 6l12 12"/></svg>
            </button>

            <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
            <div class="mb-5">
                <div class="flex items-center gap-2">
                    <h3 class="text-lg font-black text-gray-800 tracking-tight">Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠ</h3>
                    <span id="qr-pro-badge" class="bg-gradient-to-r from-yellow-400 via-amber-500 to-yellow-600 text-white text-[8px] px-2 py-0.5 rounded-full font-bold shadow-lg flex items-center gap-1">ğŸ‘‘ Premium</span>
                </div>
                <p class="text-[9px] text-gray-400 font-bold uppercase tracking-wider text-right">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…Ù„ØµÙ‚ Ø´ÙØ§Ù</p>
            </div>
            
            <div class="space-y-4 text-right">
                <!-- Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙˆÙ„ÙˆÙ† Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ -->
                <div class="flex items-center gap-3">
                    <div class="flex-1">
                        <input type="text" id="qrInput" placeholder="Ø¶Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø· Ù‡Ù†Ø§..." 
                               class="w-full border-2 border-gray-50 rounded-2xl px-4 py-3 text-xs outline-none focus:border-purple-400 bg-gray-50/50 transition-all font-bold text-left" dir="ltr">
                    </div>
                    <div class="shrink-0 flex flex-col items-center gap-1">
                        <input type="color" id="qrColorPicker" value="#000000" title="Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯"
                               style="width:38px;height:38px;-webkit-appearance:none;border:none;cursor:pointer;background:transparent;">
                        <span class="text-[7px] font-black text-gray-400 uppercase tracking-tighter">Color</span>
                    </div>
                </div>
                
                <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ù†ØµØ§Øª -->
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setFastLink('https://wa.me/966')" class="bg-green-50 text-green-600 p-2.5 rounded-xl flex flex-col items-center hover:bg-green-100 transition-all border border-green-100/50 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                        <span class="text-[8px] font-bold mt-1 uppercase tracking-tighter">WhatsApp</span>
                    </button>
                    <button onclick="setFastLink('https://instagram.com/')" class="bg-pink-50 text-pink-600 p-2.5 rounded-xl flex flex-col items-center hover:bg-pink-100 transition-all border border-pink-100/50 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
                        <span class="text-[8px] font-bold mt-1 uppercase tracking-tighter">Instagram</span>
                    </button>
                    <button onclick="setFastLink('https://www.tiktok.com/@')" class="bg-slate-50 text-slate-800 p-2.5 rounded-xl flex flex-col items-center hover:bg-slate-200 transition-all border border-slate-100 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"/></svg>
                        <span class="text-[8px] font-bold mt-1 uppercase tracking-tighter">TikTok</span>
                    </button>
                    <button onclick="setFastLink('https://')" class="bg-blue-50 text-blue-600 p-2.5 rounded-xl flex flex-col items-center hover:bg-blue-100 transition-all border border-blue-100/50 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                        <span class="text-[8px] font-bold mt-1 uppercase tracking-tighter">Website</span>
                    </button>
                </div>

                <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ÙˆØ§Ù„Ø²Ø± -->
                <div class="flex items-center gap-4 pt-4 border-t border-gray-50 mt-2">
                    <div class="w-20 h-20 bg-slate-50 rounded-2xl flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-100 flex-shrink-0">
                        <div id="qrPreviewArea">
                             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#e2e8f0" stroke-width="2.5"><rect width="5" height="5" x="3" y="3" rx="1"/><rect width="5" height="5" x="16" y="3" rx="1"/><rect width="5" height="5" x="3" y="16" rx="1"/><path d="M21 16h-3a2 2 0 0 0-2 2v3"/><path d="M12 7v3a2 2 0 0 1-2 2H7"/></svg>
                        </div>
                    </div>
                    <div class="flex-1">
                        <p class="text-[9px] text-gray-400 font-bold leading-tight mb-3">Ø³ÙŠØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙƒØµÙˆØ±Ø© PNG Ø´ÙØ§ÙØ©ØŒ Ù…Ù…Ø§ ÙŠØªÙŠØ­ Ù„Ùƒ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ ÙƒØ¹Ù†ØµØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ­Ø±ÙŠÙƒ.</p>
                        <button onclick="addQRToDesign()" class="w-full bg-purple-600 text-white py-3.5 rounded-xl font-black text-xs shadow-lg shadow-purple-100 hover:bg-purple-700 active:scale-95 transition-all">Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¢Ù†</button>
                    </div>
                </div>
            </div>
            
            <!-- Ø­Ø§ÙˆÙŠØ© Ù…Ø¤Ù‚ØªØ© (Ù…Ø®ÙÙŠØ©) -->
            <div id="hiddenBuffer" class="hidden"></div>
        </div>
    </div>
    
    <style>
        .qr-modal-animate {
            animation: qrIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @keyframes qrIn {
            from { opacity: 0; transform: scale(0.97) translateY(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
        input[type="color"]::-webkit-color-swatch { border: none; border-radius: 50%; }
    </style>

    <script src="js/app.js?v=20260130_05"></script>
    <script src="js/social_media.js"></script>
    <script src="js/discount_maker.js"></script>
    <script>
    // QR Code Functions
    function openQRModal() {
        const modal = document.getElementById('qrModal');
        const badge = document.getElementById('qr-pro-badge');
        
        // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø±Ø© PRO - Ù†ÙØ³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø§Ø¦ÙŠØ©
        if (userTier === 'premium') {
            badge.classList.add('hidden');
        } else {
            badge.classList.remove('hidden');
        }
        
        // ØªÙ†Ø¸ÙŠÙ
        document.getElementById('qrInput').value = '';
        document.getElementById('qrPreviewArea').innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#e2e8f0" stroke-width="2.5"><rect width="5" height="5" x="3" y="3" rx="1"/><rect width="5" height="5" x="16" y="3" rx="1"/><rect width="5" height="5" x="3" y="16" rx="1"/><path d="M21 16h-3a2 2 0 0 0-2 2v3"/><path d="M12 7v3a2 2 0 0 1-2 2H7"/></svg>';
        
        modal.style.display = 'flex';
    }
    
    function setFastLink(url) {
        const input = document.getElementById('qrInput');
        input.value = url;
        input.focus();
    }

    function addQRToDesign() {
        const val = document.getElementById('qrInput').value.trim() || "https://google.com";
        const selectedColor = document.getElementById('qrColorPicker').value;
        const buffer = document.getElementById('hiddenBuffer');
        
        buffer.innerHTML = "";
        
        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©
        new QRCode(buffer, {
            text: val,
            width: 800,
            height: 800,
            colorDark: selectedColor,
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.H
        });

        setTimeout(() => {
            const qrCanvas = buffer.querySelector('canvas');
            if (qrCanvas) {
                const tempCanvas = document.createElement('canvas');
                tempCanvas.width = qrCanvas.width;
                tempCanvas.height = qrCanvas.height;
                const ctx = tempCanvas.getContext('2d');
                ctx.drawImage(qrCanvas, 0, 0);

                const imgData = ctx.getImageData(0, 0, tempCanvas.width, tempCanvas.height);
                const data = imgData.data;

                // Ø¬Ø¹Ù„ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ø´ÙØ§ÙØ©
                for (let i = 0; i < data.length; i += 4) {
                    if (data[i] > 220 && data[i+1] > 220 && data[i+2] > 220) {
                        data[i+3] = 0;
                    }
                }
                ctx.putImageData(imgData, 0, 0);
                
                // Ø¹Ù„Ø§Ù…Ø© Ù…Ø§Ø¦ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„ØºÙŠØ± Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ… - Ù†ÙØ³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØµØ¯ÙŠØ±
                if (userTier !== 'premium') {
                    const w = tempCanvas.width;
                    const h = tempCanvas.height;
                    
                    // Ø´Ø±ÙŠØ· Ù…Ù…ÙˆÙ‡ Ù‚Ø·Ø±ÙŠ
                    ctx.save();
                    ctx.translate(w / 2, h / 2);
                    ctx.rotate(-35 * Math.PI / 180);
                    
                    // Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´Ø±ÙŠØ· (Ù…Ù…ÙˆÙ‡Ø©)
                    const gradient = ctx.createLinearGradient(-w, 0, w, 0);
                    gradient.addColorStop(0, 'rgba(99, 102, 241, 0.85)');
                    gradient.addColorStop(0.5, 'rgba(139, 92, 246, 0.9)');
                    gradient.addColorStop(1, 'rgba(99, 102, 241, 0.85)');
                    
                    ctx.fillStyle = gradient;
                    ctx.fillRect(-w, -45, w * 2, 90);
                    
                    // Ù†Øµ Premium
                    ctx.fillStyle = '#ffffff';
                    ctx.font = 'bold 50px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.shadowColor = 'rgba(0,0,0,0.3)';
                    ctx.shadowBlur = 4;
                    ctx.fillText('ğŸ‘‘ PREMIUM ğŸ‘‘', 0, 0);
                    
                    ctx.restore();
                    
                    // Ù†Øµ ØµØºÙŠØ± ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„
                    ctx.save();
                    ctx.fillStyle = 'rgba(100, 100, 100, 0.7)';
                    ctx.font = 'bold 28px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Ø§Ø´ØªØ±Ùƒ Ù„Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø§Ø¦ÙŠØ©', w / 2, h - 30);
                    ctx.restore();
                }
                
                const finalPngUrl = tempCanvas.toDataURL("image/png");

                // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
                document.getElementById('qrPreviewArea').innerHTML = `<img src="${finalPngUrl}" class="w-full h-full object-contain p-1">`;
                
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙØ³ Ø¯Ø§Ù„Ø© Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø¨Ø§Ù„Ø¶Ø¨Ø·!
                if (typeof addAssetToCanvas === 'function') {
                    addAssetToCanvas(finalPngUrl, true);
                } else {
                    alert('Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…');
                }
                
                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
                setTimeout(() => {
                    document.getElementById('qrModal').style.display = 'none';
                }, 300);
            }
        }, 300);
    }
    </script>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ (Social Media Handling) -->
    <div id="social-modal" class="hidden fixed inset-0 bg-black/40 z-[200000] flex items-center justify-center backdrop-blur-sm transition-all duration-300 opacity-0" onclick="closeSocialModal()">
        <div class="bg-white rounded-[2.5rem] p-7 w-full max-w-[340px] shadow-[0_30px_70px_-20px_rgba(2,132,199,0.2)] modal-animate border border-sky-50/50 relative text-right" onclick="event.stopPropagation()">
            
            <!-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ -->
            <button onclick="closeSocialModal()" class="absolute left-5 top-5 text-gray-300 hover:text-red-500 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
            
            <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h3 class="text-[13px] font-black text-gray-800 tracking-tight">Ø£Ø¶Ù Ø­Ø³Ø§Ø¨Ùƒ Ù„Ù„ØªØµÙ…ÙŠÙ…</h3>
                    <div class="h-0.5 w-6 bg-sky-500 rounded-full mt-1"></div>
                </div>
                <div class="flex items-center gap-2 bg-gray-50 px-2 py-1 rounded-xl border border-gray-100">
                    <span class="text-[8px] font-black text-gray-400 uppercase tracking-tighter">Color</span>
                    <input type="color" id="handleColor" value="#1f2937" oninput="updatePreview()" class="w-7 h-7 cursor-pointer bg-transparent border-none">
                </div>
            </div>

            <div class="space-y-5">
                <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ø±Ù -->
                <div>
                    <label class="text-[9px] font-bold text-gray-400 uppercase mb-1.5 block mr-1 tracking-widest text-right">Ø§Ù„Ù…Ø¹Ø±Ù (Username)</label>
                    <input type="text" id="socialInput" placeholder="myshop_sa" oninput="updatePreview()"
                           class="w-full border-2 border-gray-100 rounded-2xl px-4 py-3 text-xs outline-none focus:border-sky-500 bg-gray-50/30 transition-all font-bold text-left placeholder:text-gray-300" dir="ltr">
                </div>

                <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ù†ØµØ§Øª -->
                <div>
                    <label class="text-[9px] font-bold text-gray-400 uppercase mb-2 block mr-1 tracking-widest text-right">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØµØ©</label>
                    <div class="grid grid-cols-4 gap-2">
                        <div onclick="selectPlat('Instagram')" id="plat-Instagram" class="platform-btn active h-12 rounded-2xl flex items-center justify-center transition-all cursor-pointer border-2 border-gray-100 bg-gray-50/50 text-gray-400 hover:border-sky-300 hover:bg-white active:border-sky-600 active:bg-sky-50 active:text-sky-600 active:shadow-md active:scale-105" title="Instagram">
                            <i class="fab fa-instagram text-xl"></i>
                        </div>
                        <div onclick="selectPlat('Snapchat')" id="plat-Snapchat" class="platform-btn h-12 rounded-2xl flex items-center justify-center transition-all cursor-pointer border-2 border-gray-100 bg-gray-50/50 text-gray-400 hover:border-sky-300 hover:bg-white" title="Snapchat">
                            <i class="fab fa-snapchat-ghost text-xl"></i>
                        </div>
                        <div onclick="selectPlat('Twitter')" id="plat-Twitter" class="platform-btn h-12 rounded-2xl flex items-center justify-center transition-all cursor-pointer border-2 border-gray-100 bg-gray-50/50 text-gray-400 hover:border-sky-300 hover:bg-white" title="X / Twitter">
                            <i class="fab fa-x-twitter text-xl"></i>
                        </div>
                        <div onclick="selectPlat('TikTok')" id="plat-TikTok" class="platform-btn h-12 rounded-2xl flex items-center justify-center transition-all cursor-pointer border-2 border-gray-100 bg-gray-50/50 text-gray-400 hover:border-sky-300 hover:bg-white" title="TikTok">
                            <i class="fab fa-tiktok text-xl"></i>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø§Ù„Ø®Ø· -->
                <div>
                    <label class="text-[9px] font-bold text-gray-400 uppercase mb-1.5 block mr-1 tracking-widest text-right">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø· (Fonts)</label>
                    <select id="fontSelect" onchange="updatePreview()" class="w-full border-2 border-gray-100 rounded-2xl px-4 py-2.5 text-[11px] font-bold outline-none focus:border-sky-500 bg-white cursor-pointer text-gray-600 appearance-none" dir="ltr">
                        <option value="Cairo">Default (Cairo)</option>
                        <option value="Tajawal">Tajawal</option>
                        <option value="'Montserrat', sans-serif">Montserrat</option>
                        <option value="'Pacifico', cursive">Pacifico</option>
                        <option value="'Dancing Script', cursive">Dancing Script</option>
                        <option value="'Bebas Neue', cursive">Bebas Neue</option>
                        <option value="'Playfair Display', serif">Playfair Display</option>
                        <option value="'Lobster', cursive">Lobster</option>
                        <option value="'Caveat', cursive">Caveat</option>
                        <option value="'Cinzel', serif">Cinzel</option>
                    </select>
                </div>

                <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ø¯Ù…Ø¬Ø© -->
                <div id="livePreviewContainer" class="bg-slate-50 border border-dashed border-gray-200 rounded-2xl p-4 flex items-center justify-center min-h-[60px] overflow-hidden"></div>

                <!-- Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
                <button onclick="addSocialHandleToCanvas()" class="w-full bg-sky-600 text-white py-4 rounded-2xl font-black text-xs shadow-lg shadow-sky-100 hover:bg-sky-700 active:scale-95 transition-all uppercase tracking-widest">
                    Ø¥Ø¶Ø§ÙØ©
                </button>
            </div>
            
            <input type="hidden" id="selectedPlatform" value="Instagram">
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØµØ§Ù†Ø¹ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª -->
    <div id="discountModal" class="fixed inset-0 z-[200000] hidden items-center justify-center bg-black/40 backdrop-blur-md p-4 text-right">
        <div class="bg-white rounded-[2.2rem] p-6 w-full max-w-[380px] shadow-[0_20px_50px_-12px_rgba(0,0,0,0.3)] discount-modal-animate relative border border-gray-100" onclick="event.stopPropagation()">
            
            <!-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ -->
            <button onclick="closeDiscountModal()" class="absolute left-5 top-5 text-gray-300 hover:text-red-500 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18M6 6l12 12"/></svg>
            </button>

            <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
            <div class="mb-5">
                <div class="flex items-center gap-2">
                    <h3 class="text-lg font-black text-gray-800 tracking-tight">ØµØ§Ù†Ø¹ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø®ØµÙ…</h3>
                    <span id="discount-pro-badge" class="bg-gradient-to-r from-yellow-400 via-amber-500 to-yellow-600 text-white text-[8px] px-2 py-0.5 rounded-full font-bold shadow-lg flex items-center gap-1">ğŸ‘‘ Premium</span>
                </div>
                <p class="text-[9px] text-gray-400 font-bold uppercase tracking-wider text-right">Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù…Ù†ØªØ¬Ùƒ</p>
            </div>

            <div class="space-y-4 text-right">
                
                <!-- Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© -->
                <div>
                    <input type="file" id="discountProdImgInput" accept="image/*" class="hidden" onchange="handleDiscountImg(this)">
                    <div onclick="document.getElementById('discountProdImgInput').click()" class="border-2 border-dashed border-gray-200 rounded-2xl h-20 flex items-center justify-center cursor-pointer hover:bg-indigo-50 hover:border-indigo-300 transition-all bg-gray-50/50 overflow-hidden relative">
                        <div id="discountUploadPlaceholder" class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
                            <span class="text-[11px] font-bold text-gray-400">Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬</span>
                        </div>
                        <img id="discountImgPreview" class="absolute inset-0 w-full h-full object-contain p-2 hidden bg-white">
                    </div>
                </div>
                
                <!-- Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ -->
                <div>
                    <input type="text" id="discountProdName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" class="w-full border-2 border-gray-50 rounded-2xl px-4 py-3 text-xs outline-none focus:border-indigo-400 bg-gray-50/50 transition-all font-bold text-gray-700 text-center">
                </div>

                <!-- Ø§Ù„Ø£Ø³Ø¹Ø§Ø± -->
                <div class="flex gap-2">
                    <div class="flex-1 relative">
                        <input type="number" id="discountProdPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±" class="w-full border-2 border-gray-50 rounded-2xl px-4 py-2.5 text-xs font-bold outline-none focus:border-green-400 bg-gray-50/50 transition-all text-green-600 text-center">
                    </div>
                    <div class="flex-1 relative">
                        <input type="number" id="discountProdOldPrice" placeholder="Ù‚Ø¨Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" class="w-full border-2 border-gray-50 rounded-2xl px-4 py-2.5 text-xs font-bold outline-none focus:border-red-400 bg-gray-50/50 transition-all text-red-500 text-center line-through">
                    </div>
                </div>

                <!-- Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ -->
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="selectDiscountTemplate(1)" id="discount-tmpl-1" class="discount-template-btn bg-amber-50 text-amber-600 p-2.5 rounded-xl flex flex-col items-center hover:bg-amber-100 transition-all border border-amber-100/50 shadow-sm active">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect width="18" height="18" x="3" y="3" rx="2"/><circle cx="12" cy="10" r="3"/><path d="M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2"/></svg>
                        <span class="text-[8px] font-bold mt-1 uppercase tracking-tighter">ÙØ®Ø§Ù…Ø©</span>
                    </button>
                    <button onclick="selectDiscountTemplate(2)" id="discount-tmpl-2" class="discount-template-btn bg-blue-50 text-blue-600 p-2.5 rounded-xl flex flex-col items-center hover:bg-blue-100 transition-all border border-blue-100/50 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="9" x2="9" y1="21" y2="9"/></svg>
                        <span class="text-[8px] font-bold mt-1 uppercase tracking-tighter">Ø²Ø¬Ø§Ø¬ÙŠ</span>
                    </button>
                    <button onclick="selectDiscountTemplate(3)" id="discount-tmpl-3" class="discount-template-btn bg-slate-100 text-slate-700 p-2.5 rounded-xl flex flex-col items-center hover:bg-slate-200 transition-all border border-slate-200 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="m3 9 9 9 9-9"/></svg>
                        <span class="text-[8px] font-bold mt-1 uppercase tracking-tighter">Ø¨ÙˆØ³ØªØ±</span>
                    </button>
                </div>

                <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† -->
                <div class="flex items-center gap-3">
                    <div class="flex items-center gap-2 flex-1">
                        <input type="color" id="discountCardColor" value="#fffbeb" style="width:32px;height:32px;-webkit-appearance:none;border:none;cursor:pointer;background:transparent;">
                        <span class="text-[7px] font-black text-gray-400 uppercase tracking-tighter">Ø®Ù„ÙÙŠØ©</span>
                    </div>
                    <div class="flex items-center gap-2 flex-1">
                        <input type="color" id="discountBorderColor" value="#b45309" style="width:32px;height:32px;-webkit-appearance:none;border:none;cursor:pointer;background:transparent;">
                        <span class="text-[7px] font-black text-gray-400 uppercase tracking-tighter">Ø¥Ø·Ø§Ø±</span>
                    </div>
                </div>

                <!-- Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
                <button onclick="generateDiscountCard()" class="w-full bg-indigo-600 text-white py-3.5 rounded-xl font-black text-xs shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all">Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØªØµÙ…ÙŠÙ…</button>
            </div>
        </div>
    </div>
    
    <style>
        .discount-modal-animate {
            animation: discountIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @keyframes discountIn {
            from { opacity: 0; transform: scale(0.97) translateY(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        .discount-template-btn.active {
            border-color: #4f46e5 !important;
            background-color: #eef2ff !important;
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
        }
    </style>
</body>
</html>
