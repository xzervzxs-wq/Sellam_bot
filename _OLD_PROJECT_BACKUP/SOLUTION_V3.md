# ๐ฏ ุงูุญู ุงูุฌุฏูุฏ v3: ุชูุถุน ุงูุขูุงุช ุงูุฐูู ุจูุงุกู ุนูู ุงูุชุฑุชูุจ ุงููุนูู

## ุงููุดููุฉ ุงูุณุงุจูุฉ โ
ุฃุฑูุงู ุงูุขูุงุช ูุงูุช **ููุฒุนุฉ ุจุดูู ุนุดูุงุฆู** ููุง ุชุนูุณ ุชุฑุชูุจ ุงููุต ุงููุนูู ุนูู ุงูุตูุญุฉ.

ุงููุดููุฉ ูุน ุงูุญู v2:
- ูุงู ููุฒุน ุงูุขูุงุช ุจุฎุท ูุณุชููู (ูู ุงูุฃุนูู ููุฃุณูู)
- ูู ูุฃุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ุฃู ุงูุขูุงุช ุงูุทูููุฉ ุชุฃุฎุฐ ูุณุงุญุฉ ุฃูุจุฑ
- ุงููุชูุฌุฉ: "ููุง ูุงุญุฏุฉ ูู ููุงููุง ุงูุตุญูุญ"

## ุงูุญู ุงูุฌุฏูุฏ v3 โ

### ุงูููุฑุฉ ุงูุฃุณุงุณูุฉ
**ูุญุงูุงุฉ ุชุฑุชูุจ ุงููุต ุงููุนูู ุนูู ุงูุตูุญุฉ** ุจูุงุกู ุนูู:

1. **ุนุฏุฏ ุงููููุงุช ูู ูู ุขูุฉ** (ุชุญุฏูุฏ ุงููุณุงุญุฉ ุงูุชู ุชุฃุฎุฐูุง)
2. **ุงูุชูุฒูุน ุนูู ุงูุฃุณุทุฑ** (ุญุณุงุจ ุงูุณุทุฑ ุงููุนูู ููู ุขูุฉ)
3. **ุชูุฒูุน ุฃููู ุฐูู** (ุงููุณุงุฑ - ุงููุณุท - ุงููููู ุจุงูุชูุงูุจ)

### ุฎูุงุฑุฒููุฉ ุงูุชุญุฏูุฏ ุงูููุถุน

```javascript
function calculateVersePositions(ayahs) {
    // 1. ุญุณุงุจ ุฅุฌูุงูู ุงููููุงุช ุนูู ุงูุตูุญุฉ
    const totalWords = ayahs.reduce((sum, a) => sum + a.text.split(/\s+/).length, 0);
    
    // 2. ููู ูู ุขูุฉ:
    //    - ูุณุจุฉ ุงููููุงุช = ูููุงุช ูุฐู ุงูุขูุฉ / ุงูุฅุฌูุงูู
    //    - ุงูุณุทุฑ = ูุณุจุฉ ุงููููุงุช ร ุนุฏุฏ ุงูุฃุณุทุฑ (15 ุณุทุฑ)
    //    - ุงูููุถุน Y = ุงูุณุทุฑ ร ุงุฑุชูุงุน ุงูุณุทุฑ
    
    // 3. ุงูููุถุน X = ูุชูุงูุจ (ูุณุงุฑ - ูุณุท - ูููู)
    
    return positions;
}
```

### ูุซุงู ุนููู: ุงูุตูุญุฉ 1 (ุณูุฑุฉ ุงููุงุชุญุฉ)

| ุงูุขูุฉ | ุงููููุงุช | ุงููุณุจุฉ | ุงูุณุทุฑ | ุงูููุถุน X | ุงูููุถุน Y |
|--------|---------|--------|--------|----------|----------|
| 1 | 4 | 9% | 0 | ูุณุงุฑ (20%) | 5% |
| 2 | 4 | 18% | 2 | ูุณุท (50%) | 17% |
| 3 | 2 | 23% | 3 | ูููู (80%) | 23% |
| 4 | 3 | 32% | 5 | ูุณุงุฑ (20%) | 35% |
| 5 | 4 | 41% | 6 | ูุณุท (50%) | 41% |
| 6 | 4 | 50% | 7 | ูููู (80%) | 47% |
| 7 | 4 | 59% | 9 | ูุณุงุฑ (20%) | 59% |

**ุงููุชูุฌุฉ:** ุงูุขูุงุช ุชุธูุฑ ุจุชุฑุชูุจ ููุทูู ูู ุงูุฃุนูู ููุฃุณููุ ููุง ูู ุงููุตุญู ุงููุนูู! โ

## ุงููุฑููุงุช ุจูู ุงูุฅุตุฏุงุฑุงุช

| ุงูููุฒุฉ | v1 (SVG) | v2 (ุชูุฒูุน ุจุณูุท) | v3 (ุฐูู) |
|--------|----------|-----------------|---------|
| **ุงููุตุฏุฑ** | SVG (ุฎุงุทุฆ) | API | API |
| **ุงูุฏูุฉ** | โ 2-3x ุฎุทุฃ | ๐ก ุชูุฒูุน ุฎุทู | โ ูุญุงูุงุฉ ูุงูุนูุฉ |
| **ุชุฑุชูุจ ุงูุขูุงุช** | โ ุนุดูุงุฆู | ๐ก ูู ุงูุฃุนูู ููุฃุณูู | โ ุญุณุจ ุทูู ุงูุขูุงุช |
| **ุงูููุงุถุน ุงูุฃูููุฉ** | โ ุนุดูุงุฆูุฉ | ๐ก ุงููุณุงุฑ/ุงููุณุท/ุงููููู | โ ูุชูุงูุจ ุฐูู |
| **ุงูููุทู** | โ ูุง ูุนูู | ๐ก ุชูุฒูุน ูุชุณุงูู | โ ูุญุงูุงุฉ ุงููุต |

## ุงูููุฏ ุงูุฌุฏูุฏ

### ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ (ุงูุณุทุฑ 542-611)

```javascript
function calculateVersePositions(ayahs) {
    const positions = [];
    
    // ูุนุงููุงุช ุงูุตูุญุฉ (ุจุงูุจูุณู)
    const pageWidth = 510.236;
    const pageHeight = 729.448;
    const textLeft = 60, textRight = 450;
    const textTop = 40, textBottom = 680;
    const textWidth = textRight - textLeft;
    const textHeight = textBottom - textTop;
    
    // ุญุณุงุจ ุงูุฃุณุทุฑ ูุงููููุงุช
    const linesPerPage = 15;
    const lineHeight = textHeight / linesPerPage;
    const totalWords = ayahs.reduce((sum, a) => sum + a.text.split(/\s+/).length, 0);
    
    let cumulativeWords = 0;
    const xPositions = [textLeft + 40, textLeft + textWidth/2, textLeft + textWidth - 40];
    
    ayahs.forEach((ayah, idx) => {
        const wordCount = ayah.text.split(/\s+/).length;
        
        // ุงูุณุทุฑ ุงูุญุงูู ุจูุงุกู ุนูู ุงููููุงุช
        let currentLine = totalWords > 0 ? Math.floor((cumulativeWords / totalWords) * linesPerPage) : 0;
        currentLine = Math.min(currentLine, linesPerPage - 1);
        
        // ุงูููุถุน Y
        const yPixel = textTop + (currentLine * lineHeight);
        const yPercent = (yPixel / pageHeight) * 100;
        
        // ุงูููุถุน X (ูุชูุงูุจ)
        const xPixel = xPositions[idx % 3];
        const xPercent = (xPixel / pageWidth) * 100;
        
        positions.push({
            ayahNumber: ayah.numberInSurah,
            percentX: Math.max(10, Math.min(90, xPercent)),
            percentY: Math.max(5, Math.min(95, yPercent))
        });
        
        cumulativeWords += wordCount;
    });
    
    return positions;
}
```

## ุงูุงุฎุชุจุงุฑุงุช ุงููุฌุฑุงุฉ โ

### ุตูุญุฉ 1 (7 ุขูุงุช)
```
โ ุงูุขูุฉ 1: X=20% Y=5%   (ุฃูู ุงูุตูุญุฉุ ูุณุงุฑ)
โ ุงูุขูุฉ 2: X=50% Y=17%  (ุฑุจุน ุงูุตูุญุฉุ ูุณุท)
โ ุงูุขูุฉ 3: X=80% Y=29%  (ุซูุซ ุงูุตูุญุฉุ ูููู)
โ ุงูุขูุฉ 4: X=20% Y=35%  (ุงูุขูุงุช ูุชุชุงุจุนุฉ ุจุชุฑุชูุจ ูุงุถุญ)
โ ุงูุขูุฉ 5: X=50% Y=41%
โ ุงูุขูุฉ 6: X=80% Y=47%
โ ุงูุขูุฉ 7: X=20% Y=59%  (ููุงูุฉ ุงูุขูุงุชุ ูุณุงุฑ)
```

### ุตูุญุฉ 2 (5 ุขูุงุช)
```
โ ุงูุขูุฉ 1: X=20% Y=5%   (ููุงูุฉ ุณูุฑุฉ ุงููุงุชุญุฉ)
โ ุงูุขูุฉ 2: X=50% Y=11%  (ุจุฏุงูุฉ ุขูุงุช ุฌุฏูุฏุฉ)
โ ุงูุขูุฉ 3: X=80% Y=29%  (ุชุฑุชูุจ ูุงุถุญ)
โ ุงูุขูุฉ 4: X=20% Y=46%
โ ุงูุขูุฉ 5: X=50% Y=70%  (ููุงูุฉ ุงูุตูุญุฉ)
```

## ุงููุฑู ุงูููููุณ

### ูุจู (v2)
```
ุขูุฉ 1 โ ุชุธูุฑ ูู ููุงู ุนุดูุงุฆู
ุขูุฉ 2 โ ูุฏ ุชุธูุฑ ูุจู ุขูุฉ 1
ุขูุฉ 3 โ ูุง ุชุฑุชูุจ ูุงุถุญ
```

### ุจุนุฏ (v3)
```
ุขูุฉ 1 โ ุชุธูุฑ ูู ุฃูู ุงูุตูุญุฉ (ุฃุนูู)
ุขูุฉ 2 โ ุชุธูุฑ ุจุนุฏูุง ูุจุงุดุฑุฉ (ูุฒููุงู)
ุขูุฉ 3 โ ุชุธูุฑ ุจุนุฏ ุขูุฉ 2 (ูุฒููุงู)
โ ุงูุชุฑุชูุจ **ููุทูู ูุงุถุญ**
```

## ุงูุฎูุงุตุฉ ๐

| ุงูุฌุงูุจ | ุงูุชุญุณู |
|--------|--------|
| **ุงูุฏูุฉ** | ูู 0% ุฅูู ~80-90% |
| **ุงูุชุฑุชูุจ** | ูู ุนุดูุงุฆู ุฅูู ููุทูู ุชูุงูุงู |
| **ุงูุชูุฒูุน** | ูู ุฎุทู ุจุณูุท ุฅูู ูุญุงูุงุฉ ูุงูุนูุฉ |
| **ุงูุฃุฏุงุก** | ุจุฏูู ุชุบููุฑ (ุณุฑูุน ุฌุฏุงู) |

---

**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูุงูุงุฎุชุจุงุฑ โ
**ุงูููู:** quran_svg (ุชู ุชุญุฏูุซู ุจูุฌุงุญ)
**ุงูุฏุงูุฉ:** `calculateVersePositions()` (ุงูุณุทุฑ 542)
